{
  "hash": "7faa6850d78267eb2bcce0bbb6fad70d",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Hi Docker ğŸ³\"\ndescription: \"A single-member full-stack data team me learning Docker ğŸ˜‚\"\nauthor:\n  - name: \"Tuan Le Khac\"\n    url: https://lktuan.github.io/\ncategories: [Docker, Python] \ndate: 06-24-2024\ndate-modified: 06-25-2024\nimage: docker.png\ncode-tools: true\ncode-fold: show\ncode-annotations: hover\ndraft: false\ncss: html/styles.scss\nfig-cap-location: bottom\neditor: visual\n\nformat:\n  html:\n    code-overflow: wrap\n---\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\nXuáº¥t phÃ¡t lÃ  dÃ¢n Kinh táº¿ vÃ  hiá»‡n táº¡i Ä‘i theo hÆ°á»›ng DS, mÃ¬nh khÃ´ng giá»i lÃ m viá»‡c vá»›i cÃ¡c cÃ´ng cá»¥ phÃ¡t triá»ƒn pháº§n má»m, Docker lÃ  má»™t trong sá»‘ Ä‘Ã³. Tuy nhiÃªn trong má»™t dá»± Ã¡n Data cá»§a team, mÃ¬nh cáº§n sá»­ dá»¥ng cÃ¡c cÃ´ng vá»¥ nhÆ° Airflow, Airbyte hay DBT. Háº§u háº¿t cÃ¡c setup Ä‘á»u cáº§n Docker. Do Ä‘Ã³ thÃ¬, pháº£i há»c thÃ´i!\n\nMÃ¬nh há»c táº­p theo video [\"HÆ°á»›ng dáº«n tá»« A-Z tá»± xÃ¢y dá»±ng á»©ng dá»¥ng vá»›i Docker\"](https://www.youtube.com/watch?v=Gh1Sgknc6Fg&t=358s) cá»§a anh [**Viá»‡t Nguyá»…n AI**](https://www.youtube.com/@vietnh1009).\n:::\n\n::: {.column width=\"10%\"}\n<!-- empty column to create gap -->\n:::\n\n::: {.column width=\"50%\"}\n![VS Code-song ğŸ˜ª](vs_cot_song.png){width=\"100%\"}\n:::\n\n::::\n\n# Introduction / Docker Desktop / Docker Image vs Docker Container\n\n- CÃ¡ch cÃ i Ä‘áº·t: trÃªn trang get started, phiÃªn báº£n Window (ráº¥t dá»… Ä‘á»ƒ mÃ¬nh follow do mÃ¬nh cÅ©ng xÃ i Win).\n- Nháº¯c láº¡i vá» Docker Image vÃ  Docker Container: giá»‘ng nhÆ° Class vÃ  Object trong OOP, Image chá»‰ cho chÃºng ta biáº¿t má»™t cÃ¡ch lÃ½ thuyáº¿t vá» thá»±c thá»ƒ Ä‘Ã³, khi dá»±a vÃ o lÃ½ thuyáº¿t Ä‘Ã³ táº¡o ra má»™t Container thÃ¬ chÅ©ng ta má»›i cÃ³ má»™t thá»±c thá»ƒ dá»± vÃ o lÃ½ thuyáº¿t Ä‘Ã³.\n- TrÆ°á»›c Docker Image, cÃ²n cÃ³ Dockerfile (giá»‘ng nhÆ° cÃ´ng thá»©c náº¥u Äƒn) giÃºp Ä‘á»‹nh nghÄ©a má»™t sá»‘ phÆ°Æ¡ng thá»©c táº¡o ra Image.\n\n::: {layout-ncol=\"1\"}\n![Image vs Container ~ Class vs Object](class_vs_object.png){width=\"100%\"}\n:::\n\n# Docker tutorial\n\nThá»±c hÃ nh theo tutorial trÃªn Docker Desktop: \"How do I run a container?\"\n\n:::{.callout-tip}\nXem ná»™i dung cá»§a má»™t file thÃ´ng qua powershell:\n```bash\ncat file_name\n```\nTrong trÆ°á»ng há»£p thá»±c hÃ nh cá»§a mÃ¬nh lÃ \n\n```bash\ncd welcome-to-docker\ncat .\\Dockerfile\n```\n:::\n\nNá»™i dung Dockerfile:\n\n```md\n# Start your image with a node base image\nFROM node:18-alpine \n# Má»—i custome docker image Ä‘á»u dá»±a vÃ o má»™t base image, nhÆ° má»™t class con káº¿ thá»«a má»™t class cha. NÆ¡i tÃ¬m Docker Image: Docker Hub.\n\n# The /app directory should act as the main application directory\nWORKDIR /app\n# ChÃºng ta lÃ m viá»‡c á»Ÿ bÃªn trong thÆ° má»¥c nÃ o (náº¿u khÃ´ng Ä‘á» cáº­p thÃ¬ sáº½ táº¡o trong má»™t thÆ° má»¥c máº·c Ä‘á»‹nh)\n\n# Copy the app package and package-lock.json file\nCOPY package*.json ./\n# Copy cÃ¡c file trong mÃ¡y vÃ o bÃªn trong Docker Image - file nÃ y cháº¯c lÃ  file cáº¥u hÃ¬nh\n\n# Copy local directories to the current local directory of our docker image (/app)\nCOPY ./src ./src\nCOPY ./public ./public\n# Copy cÃ¡c thÆ° má»¥c source\n\n# Install node packages, install serve, build the app, and remove dependencies at the end\nRUN npm install \\\n    && npm install -g serve \\\n    && npm run build \\\n    && rm -fr node_modules\n# Run, cÃ i Ä‘áº·t cÃ¡c thÆ° viá»‡n, package\n\nEXPOSE 3000\n# Má»Ÿ má»™t cá»•ng á»Ÿ trong Docker container, sau nÃ y chÃºng ta sáº½ káº¿t ná»‘i cá»•ng nÃ y vá»›i má»™t cá»•ng trong mÃ¡y cá»§a chÃºng ta.\n\n# Start the app using serve command\nCMD [ \"serve\", \"-s\", \"build\" ]\n# ChÃºng ta muá»‘n cháº¡y lá»‡nh gÃ¬ trong CMD, chá»‰ má»™t lá»‡nh CMD (lá»‡nh cuá»‘i cÃ¹ng) sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng trong má»™t Dockerfile.\n```\n\nBuild fist image:\n\n```bash\ndocker build -t welcome-to-docker .\n```\n\nBreaking down this command:\n\n> The -t flag tags your image with a name. (welcome-to-docker in this case). And the . lets Docker know where it can find the Dockerfile.\n\n# Tá»± xÃ¢y dá»±ng Docker Image Ä‘á»ƒ huáº¥n luyá»‡n mÃ´ hÃ¬nh AI\n\nMÃ¬nh cÃ³ má»™t file python Ä‘Æ¡n giáº£n, huáº¥n luyá»‡n má»™t mÃ´ hÃ¬nh Random forest Ä‘á»ƒ nháº­n diá»‡n hoa diá»…n vÄ© tá»« bá»™ `iris` dataset vá»›i thÆ° viá»‡n `sklearn` nhÆ° sau:\n\n::: {#ed8f099a .cell execution_count=1}\n``` {.python .cell-code}\n# importing required libraries\n# importing Scikit-learn library and datasets package\nfrom sklearn import datasets\n# Splitting arrays or matrices into random train and test subsets\nfrom sklearn.model_selection import train_test_split\n# importing random forest classifier from assemble module\nfrom sklearn.ensemble import RandomForestClassifier\n# importing scaler\nfrom sklearn.preprocessing import StandardScaler\n# metrics are used to find accuracy or error\nfrom sklearn.metrics import accuracy_score \n\n# Loading the iris plants dataset (classification)\niris = datasets.load_iris()\n# dividing the datasets into two parts i.e. training datasets and test datasets\nX = iris.data[:, [2, 3]]\ny = iris.target\n# i.e. 70 % training dataset and 30 % test datasets\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.20, random_state=0)\n\n\nscaler = StandardScaler()\nx_train = scaler.fit_transform(X_train)\nx_test = scaler.transform(X_test)\n\nmodel = RandomForestClassifier()\nmodel.fit(x_train, y_train)\ny_pred = model.predict(x_test)\n\nfor pred, label in zip(y_pred, y_test):\n    print(\"Prediction: {}. Label: {}\".format(pred, label))\n\nprint(\"Accuracy: %.2f\" % accuracy_score(y_test, y_pred))\n```\n:::\n\n\nMÃ¬nh xÃ¢y dá»±ng `Dockerfile` má»™t cÃ¡ch Ä‘Æ¡n giáº£n nhÆ° sau:\n\n\n```{md filename=\"Dockerfile\"}\nFROM ubuntu\n```\n\n\nRun má»™t docker container (container vá»«a run sáº½ láº­p tá»©c exit):\n\n```bash\ndocker run image_name container_name\n```\n\nNáº¿u muá»‘n \"chui\" vÃ o bÃªn trong container:\n\n```bash\ndocker run -it image_name container_name bash\n```\n`-it` nghÄ©a lÃ  chÃºng ta cháº¡y container dÆ°á»›i **interactive** mode, `bash` nghÄ©a lÃ  cháº¡y trong **bash** mode, chÃºng ta cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c cÃ¢u lá»‡nh bash tá»« Ä‘Ã¢y:\n\n# Giá»›i thiá»‡u vá» script Python\n\n# TÃ¬m Base Image trÃªn Docker Hub\n\n# CÃ i Ä‘áº·t cÃ¡c thÆ° viá»‡n trong Docker Image\n\n# Copy dá»¯ liá»‡u tá»« host vÃ o Docker Image\n\n# CÃ¢u lá»‡nh CMD trong Dockerfile\n\n# End\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {}
  }
}