<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Tuan Le Khac">
<meta name="dcterms.date" content="2024-06-05">
<meta name="description" content="This is Tuan’s blog">
<title>Về quy ước đặt tên dữ liệu – Le Khac Tuan</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../img/rocket_1613268.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-8e54dfbe729680b42f22c627ac27a053.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-81b089a3b74ed4cf194f083418e7130b.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-89cb849060b93fd12025e4f44aaa3f02.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-27750d9d09892f3d6a52d1fd788c41c6.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="../../site_libs/quarto-diagram/mermaid.min.js"></script><script src="../../site_libs/quarto-diagram/mermaid-init.js"></script><link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<link href="../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../../site_libs/datatables-binding-0.33/datatables.js"></script><script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="../../site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="../../site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="../../site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="../../site_libs/selectize-0.12.0/selectize.min.js"></script><link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><script src="../../site_libs/d3-4.10.2/d3.min.js"></script><link href="../../site_libs/collapsibleTree-0.1.6/collapsibleTree.css" rel="stylesheet">
<script src="../../site_libs/collapsibleTree-binding-0.1.8/collapsibleTree.js"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Le Khac Tuan</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../about/index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../curriculum/index.html"> 
<span class="menu-text">Curriculum</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../学汉语的日记.html"> 
<span class="menu-text">学汉语的日记</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../jiu_jitsu_journal/index.html"> 
<span class="menu-text">Jiu Jitsu Journal</span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/lktuan"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/tuanlekhac/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.facebook.com/toilatuan.lk/"> <i class="bi bi-facebook" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/Halle4231"> <i class="bi bi-twitter-x" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/@tuan_lekhac"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:tuan.lekhac0905@gmail.com"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Về quy ước đặt tên dữ liệu</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
                  <div>
        <div class="description">
          Danh pháp quy ước để đặt tên cho dữ liệu dạng bảng, tăng tốc độ hiểu biết và sử dụng dữ liệu
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">data quality</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://lktuan.github.io/">Tuan Le Khac</a> </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 5, 2024</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">July 3, 2024</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#controlled-vocabulary" id="toc-controlled-vocabulary" class="nav-link active" data-scroll-target="#controlled-vocabulary">Controlled Vocabulary</a>
  <ul class="collapse">
<li><a href="#level-1-ki%E1%BB%83u-d%E1%BB%AF-li%E1%BB%87u-ki%E1%BB%83u-%C4%91o-l%C6%B0%E1%BB%9Dng" id="toc-level-1-kiểu-dữ-liệu-kiểu-đo-lường" class="nav-link" data-scroll-target="#level-1-ki%E1%BB%83u-d%E1%BB%AF-li%E1%BB%87u-ki%E1%BB%83u-%C4%91o-l%C6%B0%E1%BB%9Dng">Level 1: Kiểu dữ liệu, kiểu đo lường</a></li>
  <li><a href="#level-2-%C4%91%E1%BB%91i-t%C6%B0%E1%BB%A3ng-ch%E1%BB%A7-%C4%91%E1%BB%81" id="toc-level-2-đối-tượng-chủ-đề" class="nav-link" data-scroll-target="#level-2-%C4%91%E1%BB%91i-t%C6%B0%E1%BB%A3ng-ch%E1%BB%A7-%C4%91%E1%BB%81">Level 2: Đối tượng, chủ đề</a></li>
  <li><a href="#level-3-n-chi-ti%E1%BA%BFt" id="toc-level-3-n-chi-tiết" class="nav-link" data-scroll-target="#level-3-n-chi-ti%E1%BA%BFt">Level 3-n: Chi tiết</a></li>
  <li><a href="#k%E1%BA%BFt-h%E1%BB%A3p-ch%C3%BAng-l%E1%BA%A1i" id="toc-kết-hợp-chúng-lại" class="nav-link" data-scroll-target="#k%E1%BA%BFt-h%E1%BB%A3p-ch%C3%BAng-l%E1%BA%A1i">Kết hợp chúng lại</a></li>
  </ul>
</li>
  <li><a href="#data-validation" id="toc-data-validation" class="nav-link" data-scroll-target="#data-validation">Data Validation</a></li>
  <li><a href="#data-discoverability" id="toc-data-discoverability" class="nav-link" data-scroll-target="#data-discoverability">Data Discoverability</a></li>
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link" data-scroll-target="#data-wrangling">Data Wrangling</a></li>
  <li>
<a href="#other-languages" id="toc-other-languages" class="nav-link" data-scroll-target="#other-languages">Other languages</a>
  <ul class="collapse">
<li><a href="#generating-sql" id="toc-generating-sql" class="nav-link" data-scroll-target="#generating-sql">Generating SQL</a></li>
  <li><a href="#r---base-data.table" id="toc-r---base-data.table" class="nav-link" data-scroll-target="#r---base-data.table">R - <code>base</code> &amp; <code>data.table</code></a></li>
  <li><a href="#python-pandas" id="toc-python-pandas" class="nav-link" data-scroll-target="#python-pandas">python <code>pandas</code></a></li>
  </ul>
</li>
  <li>
<a href="#updates-by-emily" id="toc-updates-by-emily" class="nav-link" data-scroll-target="#updates-by-emily">Updates by Emily</a>
  <ul class="collapse">
<li><a href="#concept-map" id="toc-concept-map" class="nav-link" data-scroll-target="#concept-map">Concept Map</a></li>
  <li><a href="#new-package-dec-2020" id="toc-new-package-dec-2020" class="nav-link" data-scroll-target="#new-package-dec-2020">New Package (Dec 2020)</a></li>
  <li><a href="#new-package-april-2021" id="toc-new-package-april-2021" class="nav-link" data-scroll-target="#new-package-april-2021">New Package (April 2021)</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content"><div class="callout callout-style-default callout-note callout-titled" name="Edit">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Các bạn cũng có thể xem thêm slide về dbtplyr của Emily trong posit::conf ở <a href="https://www.emilyriederer.com/talk/dbtplyr/">đây</a>.</p>
</div>
</div>
<hr>
<p>Đây là keynote từ article <a href="https://emilyriederer.netlify.app/post/column-name-contracts/">Column Names as Contracts</a> của <a href="https://emilyriederer.netlify.app/about">Emily Riederer</a>.</p>
<p>Các sản phẩm phần mềm luôn tuân theo một quy ước nhất định (về hình ảnh, ký tự) nhằm để người dùng có thể ngay lập tức nắm bắt được cách thức sử dụng, giao tiếp với nó. Ví dụ, nút Home thường sẽ đưa người dùng về trang chủ của một mobile app, nút “blog” trên blog của tôi sẽ đưa các bạn tiếp cận danh mục bài viết, etc. Ở layer phía sau, các API được BE viết cần tuân thủ documented inputs &amp; outputs, để các BE khác hay FE có thể sử dụng.</p>
<p>Tuy nhiên các bảng dữ liệu lại nằm ở một vùng màu xám không rõ ràng. Data service (từ producer i.e DE -&gt; user i.e DA, DS) đủ tĩnh để không được xem là normal service, nhưng cũng đủ thô để người ta ít chú ý đến nó về mặt giao diện. DE cứ thể lấy hết mọi dữ liệu trong hệ thống, DA nhìn dữ liệu và ngay lập tức giả định được nội dung của (cột) dữ liệu đó.</p>
<blockquote class="blockquote">
<p>Producers wonder why consumers aren’t satisfied, and consumers wonder why the data is never “right”.</p>
</blockquote>
<p>Cũng có một cách được nhiều tổ chức sử dụng như là Metadata managament, như:</p>
<ul>
<li>Lyft’s <a href="https://eng.lyft.com/amundsen-lyfts-data-discovery-metadata-engine-62d27254fbb9">Amundsen</a>
</li>
<li>LinkedIn’s <a href="https://www.linkedin.com/blog/engineering/archive/data-hub">DataHub</a>
</li>
<li>Netflix’s <a href="https://netflixtechblog.com/building-and-scaling-data-lineage-at-netflix-to-improve-data-infrastructure-reliability-and-1a52526a7977">Metacat</a>
</li>
</ul>
<p>Tuy nhiên giải pháp này là documentation oriented, producer và user đều phải tuân thủ nghiêm ngặt. Nó không <em>trực diện</em> khi DE đặt tên cột, hay DA đọc dữ liệu.</p>
<p>Ý tưởng của Emily là chuẩn hóa các quy ước đặt tên dữ liệu bằng <a href="https://en.wikipedia.org/wiki/Controlled_vocabulary">Controlled vocabulary</a>. Minh họa bằng <code>pointblank</code>, <code>collapsibleTree</code>, và <code>dplyr</code>.</p>
<section id="controlled-vocabulary" class="level1"><h1>Controlled Vocabulary</h1>
<p>CV là phương pháp sử dụng một tập hợp các từ, cụm từ, từ viết tắt để ký hiệu thông tin. Quy ước này cần được định nghĩa đề phù hợp cho tính chất bộ dữ liệu, và cũng đủ đơn giản để người tạo dữ liệu, người sử dụng dữ liệu sử dụng.</p>
<p>Ví dụ, 1 ứng dụng booking.</p>
<section id="level-1-kiểu-dữ-liệu-kiểu-đo-lường" class="level2"><h2 class="anchored" data-anchor-id="level-1-kiểu-dữ-liệu-kiểu-đo-lường">Level 1: Kiểu dữ liệu, kiểu đo lường</h2>
<ul>
<li>
<code>ID</code>: chỉ đối tượng, dạng numberic, tối ưu cho việc lưu trữ và thường làm khóa chính các bảng’</li>
<li>
<code>IND</code>: giá trị boolean 0/1, tôi thì thường sử dụng các từ như <code>IS</code>, <code>FLAG</code>;</li>
<li>
<code>N</code>: chỉ các dạng thông tin <em>có thể đếm (count)</em> được;</li>
<li>
<code>AMT</code>: chỉ các dạng thông tin có thể tổng, thường đề cập đến <em>currency</em>;</li>
<li>
<code>VAL</code>: cũng là số nhưng không thể tổng được (không có ý nghĩa), ví dụ như <em>kinh độ</em>, <em>vĩ độ</em>;</li>
<li>
<code>DT</code>: ngày;</li>
<li>
<code>TM</code>: giờ hoặc ngày giờ;</li>
<li>
<code>CAT</code>: category</li>
</ul>
<p>Cũng tùy vào dữ liệu, có thể thêm các cụm từ nhất định đề đề cập đến thông tin dữ liệu đó mang lại, ví dụ <code>ADD</code> cho address.</p>
</section><section id="level-2-đối-tượng-chủ-đề" class="level2"><h2 class="anchored" data-anchor-id="level-2-đối-tượng-chủ-đề">Level 2: Đối tượng, chủ đề</h2>
<p>Mối quan tâm của người dùng dữ liệu cũng giống như nhà quản trị, xung quanh các đối tượng của business: <code>USER</code>, <code>TRANSACTION</code>, etc.</p>
<p>Đối với ứng dụng đặt xe, các chủ thể có thể cần quan tâm là <code>TRIP</code>, <code>TRAVELER</code>, <code>ACCOMODATION</code>, <code>TRANSPORTATION</code>, etc.</p>
</section><section id="level-3-n-chi-tiết" class="level2"><h2 class="anchored" data-anchor-id="level-3-n-chi-tiết">Level 3-n: Chi tiết</h2>
<p>Hai tầng trên về cơ bản đã cho phép chúng ta mô tả được cột thông tin, chúng đều thể hiện được thuộc tính của chủ thể. Ví dụ:</p>
<ul>
<li>
<code>AMT_TRIP</code>: giá trị deal của Trip;</li>
<li>
<code>ADD_DESTINATION</code>: Điểm đến của trip.</li>
</ul>
<p>Tuy nhiên tùy vào từng use case, chúng ta hoàn toàn có thể mở rộng được về cả hai phía. Ví dụ:</p>
<ul>
<li>Về phía trước: khi làm việc với nhiều layer dữ liệu, ta có thể dùng <code>RAW</code>, <code>STAGING</code>, <code>DW</code>, <code>DL</code>, <code>DM</code>, etc<br>
</li>
<li>Về phía sau: <code>DAY</code> hoặc <code>MONTH</code> cho <code>N_DURATION</code>, <code>VND</code> hoặc <code>USD</code> cho currency <code>AMT</code>.</li>
</ul>
<p>Miễn là có một quy chuẩn, và nó đủ đơn giản để sử dụng.</p>
</section><section id="kết-hợp-chúng-lại" class="level2"><h2 class="anchored" data-anchor-id="kết-hợp-chúng-lại">Kết hợp chúng lại</h2>
<p>Tất nhiên ràng buộc việc đặt tên như vậy không chỉ để trang trí, nó sẽ giúp chúng ta tự động hóa quy trình kiểm soát chất lượng dữ liệu, .</p>
<p>Tôi sử dụng <a href="https://www.kaggle.com/datasets/rkiattisak/traveler-trip-data">bộ dữ liệu</a> này để thực hành (cột dữ liệu đã được đổi tên).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">head</span>(trip_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 13
  ID_TRIP CAT_DESTINATION_CITY DT_START  DT_END N_DURATION_DAY CAT_TRAVELER_NAME
    &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt;     &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;            
1       1 London, UK           5/1/2023  5/8/2…              7 John Smith       
2       2 Phuket, Thailand     6/15/2023 6/20/…              5 Jane Doe         
3       3 Bali, Indonesia      7/1/2023  7/8/2…              7 David Lee        
4       4 New York, USA        8/15/2023 8/29/…             14 Sarah Johnson    
5       5 Tokyo, Japan         9/10/2023 9/17/…              7 Kim Nguyen       
6       6 Paris, France        10/5/2023 10/10…              5 Michael Brown    
# ℹ 7 more variables: VAL_AGE_TRAVELER &lt;dbl&gt;, IND_GENDER_TRAVELER &lt;chr&gt;,
#   CAT_TRAVELER_NATIONALITY &lt;chr&gt;, CAT_ACCOMMODATION_TYPE &lt;chr&gt;,
#   AMT_ACCOMMODATION_COST &lt;chr&gt;, CAT_TRANSPORTATION_TYPE &lt;chr&gt;,
#   AMT_TRANSPORTATION_COST &lt;chr&gt;</code></pre>
</div>
</div>
</section></section><section id="data-validation" class="level1 page-columns page-full"><h1>Data Validation</h1>
<p>Sử dụng <code>pointblank</code> của R để kiếm tra một số tính chất của dữ liệu:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">library</span>(pointblank)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>agent <span class="ot">&lt;-</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  trip_data  <span class="sc">%&gt;%</span> </span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="fu">create_agent</span>(<span class="at">actions =</span> <span class="fu">action_levels</span>(<span class="at">stop_at =</span> <span class="fl">0.001</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="#cb3-6"></a>  <span class="fu">col_vals_gte</span>(<span class="fu">starts_with</span>(<span class="st">"N"</span>), <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># check if cols start with N is GTE 0 or not</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="fu">col_vals_gte</span>(<span class="fu">starts_with</span>(<span class="st">"VAL"</span>), <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># check if cols start with VAL is GTE 0 or not</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="fu">col_vals_not_null</span>(<span class="fu">starts_with</span>(<span class="st">"IND"</span>)) <span class="sc">%&gt;%</span> <span class="co"># check if cols start with IND contain Null or not</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>  <span class="fu">col_vals_in_set</span>(<span class="fu">starts_with</span>(<span class="st">"IND"</span>), <span class="fu">c</span>(<span class="st">"Male"</span>,<span class="st">"Female"</span>)) <span class="sc">%&gt;%</span> <span class="co"># validate the value of only column started with IND - Gender</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="fu">col_is_date</span>(<span class="fu">starts_with</span>(<span class="st">"DT"</span>)) <span class="sc">%&gt;%</span> <span class="co"># check validation of date columns</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>  <span class="fu">interrogate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Note: To type <code>pipe</code> operator in VS Code, use this in the <code>keybindings.json</code> file:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource json number-lines code-with-copy"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="dt">"key"</span><span class="fu">:</span> <span class="st">"Ctrl+Shift+m"</span><span class="fu">,</span>             </span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="dt">"command"</span><span class="fu">:</span> <span class="st">"type"</span><span class="fu">,</span> </span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="dt">"args"</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">"text"</span><span class="fu">:</span> <span class="st">" %&gt;% "</span> <span class="fu">},</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="dt">"when"</span><span class="fu">:</span> <span class="st">"editorTextFocus </span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="st">            &amp;&amp; !editorHasSelection </span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="st">            &amp;&amp; editorLangId </span></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="st">            == 'quarto'"</span> </span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="fu">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then you can get the <code>pipe</code> when type <code>Ctrl + Shift + M</code>.</p>
</div></div><div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>agent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="pb_agent" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("https://unpkg.com/balloon-css/balloon.min.css");
#pb_agent table {
  font-family: 'IBM Plex Sans', system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#pb_agent thead, #pb_agent tbody, #pb_agent tfoot, #pb_agent tr, #pb_agent td, #pb_agent th {
  border-style: none;
}

#pb_agent p {
  margin: 0;
  padding: 0;
}

#pb_agent .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 90%;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pb_agent .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pb_agent .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pb_agent .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pb_agent .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pb_agent .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pb_agent .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pb_agent .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pb_agent .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pb_agent .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pb_agent .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pb_agent .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pb_agent .gt_spanner_row {
  border-bottom-style: hidden;
}

#pb_agent .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pb_agent .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pb_agent .gt_from_md > :first-child {
  margin-top: 0;
}

#pb_agent .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pb_agent .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pb_agent .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pb_agent .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pb_agent .gt_row_group_first td {
  border-top-width: 2px;
}

#pb_agent .gt_row_group_first th {
  border-top-width: 2px;
}

#pb_agent .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pb_agent .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pb_agent .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pb_agent .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pb_agent .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pb_agent .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pb_agent .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#pb_agent .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pb_agent .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pb_agent .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pb_agent .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pb_agent .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pb_agent .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pb_agent .gt_left {
  text-align: left;
}

#pb_agent .gt_center {
  text-align: center;
}

#pb_agent .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pb_agent .gt_font_normal {
  font-weight: normal;
}

#pb_agent .gt_font_bold {
  font-weight: bold;
}

#pb_agent .gt_font_italic {
  font-style: italic;
}

#pb_agent .gt_super {
  font-size: 65%;
}

#pb_agent .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#pb_agent .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pb_agent .gt_indent_1 {
  text-indent: 5px;
}

#pb_agent .gt_indent_2 {
  text-indent: 10px;
}

#pb_agent .gt_indent_3 {
  text-indent: 15px;
}

#pb_agent .gt_indent_4 {
  text-indent: 20px;
}

#pb_agent .gt_indent_5 {
  text-indent: 25px;
}

#pb_agent {
  -webkit-font-smoothing: antialiased;
}

#pb_agent .gt_row {
  overflow: visible;
}

#pb_agent .gt_sourcenote {
  height: 35px;
  padding: 0;
}

#pb_agent code {
  font-family: 'IBM Plex Mono', monospace, courier;
  color: black;
  background-color: transparent;
  padding: 0;
}
</style>
<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="14" class="gt_heading gt_title gt_font_normal" style="text-align: left; color: #444444; font-size: 28px; font-weight: 500;">Pointblank Validation</th>
</tr>
<tr class="gt_heading even">
<th colspan="14" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style="text-align: left; font-size: 12px;">
<span style="text-decoration-style:solid;text-decoration-color:#ADD8E6;text-decoration-line:underline;text-underline-position:under;color:#333333;font-variant-numeric:tabular-nums;padding-left:4px;margin-right:5px;padding-right:2px;">[2024-07-04|09:52:39]</span>

<div style="height:25px;padding-top:10px;">
<span style="background-color: #F1D35A;color: #222222;padding: 0.5em 0.5em;position: inherit;text-transform: uppercase;margin: 5px 1px 5px 4px;font-weight: bold;border: solid 1px #F1D35A;padding: 2px 10px 2px 10px;font-size: smaller;">tibble</span><span style="background-color:#E5AB00;color:white;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin:5px 0px 5px 5px;font-weight:bold;border:solid 1px #E5AB00;padding:2px 15px 2px 15px;font-size:smaller;">WARN</span> <span style="background-color:none;color:#333333;padding:0.5em 0.5em;position:inherit;margin:5px 0px 5px -4px;font-weight:bold;border:solid 1px #E5AB00;padding:2px 15px 2px 15px;font-size:smaller;">—</span> <span style="background-color:#D0182F;color:white;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin:5px 0px 5px 1px;font-weight:bold;border:solid 1px #D0182F;padding:2px 15px 2px 15px;font-size:smaller;">STOP</span> <span style="background-color:none;color:#333333;padding:0.5em 0.5em;position:inherit;margin:5px 0px 5px -4px;font-weight:bold;border:solid 1px #D0182F;padding:2px 15px 2px 15px;font-size:smaller;">0.00</span> <span style="background-color:#499FFE;color:white;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin:5px 0px 5px 1px;font-weight:bold;border:solid 1px #499FFE;padding:2px 15px 2px 15px;font-size:smaller;">NOTIFY</span> <span style="background-color:none;color:#333333;padding:0.5em 0.5em;position:inherit;margin:5px 0px 5px -4px;font-weight:bold;border:solid 1px #499FFE;padding:2px 15px 2px 15px;font-size:smaller;">—</span>
</div>
</th>
</tr>
<tr class="gt_col_headings header">
<th class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col"></th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col"></th>
<th id="STEP" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">STEP</th>
<th id="COLUMNS" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">COLUMNS</th>
<th id="VALUES" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">VALUES</th>
<th id="TBL" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">TBL</th>
<th id="EVAL" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">EVAL</th>
<th id="UNITS" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">UNITS</th>
<th id="PASS" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">PASS</th>
<th id="FAIL" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">FAIL</th>
<th id="W" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">W</th>
<th id="S" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">S</th>
<th id="N" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">N</th>
<th id="EXT" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" style="color: #666666; font-weight: bold" scope="col">EXT</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="status_color" style="background-color: #CF142B; height: 40px"><br></td>
<td class="gt_row gt_right" headers="i" style="color: #666666; font-size: 13px; font-weight: bold; height: 40px">1</td>
<td class="gt_row gt_left" headers="type" style="height: 40px"><div aria-label="Expect that values in `N_DURATION_DAY` should be >= `0`. " data-balloon-pos="right" style="width:fit-content;">
<div style="margin:0;padding:0;display:inline-block;height:30px;vertical-align:middle;">
<svg width="30px" height="30px" viewbox="0 0 67 67" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><title>
col_vals_gte
</title>
<g id="All-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="col_vals_gte" transform="translate(0.000000, 0.241379)"><path d="M56.712234,1 C59.1975153,1 61.4475153,2.00735931 63.076195,3.63603897 C64.7048747,5.26471863 65.712234,7.51471863 65.712234,10 L65.712234,10 L65.712234,65 L10.712234,65 C8.22695259,65 5.97695259,63.9926407 4.34827294,62.363961 C2.71959328,60.7352814 1.71223397,58.4852814 1.71223397,56 L1.71223397,56 L1.71223397,10 C1.71223397,7.51471863 2.71959328,5.26471863 4.34827294,3.63603897 C5.97695259,2.00735931 8.22695259,1 10.712234,1 L10.712234,1 Z" id="rectangle" stroke="#000000" stroke-width="2" fill="#FFFFFF"></path><path d="M49.712234,12 L17.712234,12 C14.952234,12 12.712234,14.24 12.712234,17 L12.712234,49 C12.712234,51.76 14.952234,54 17.712234,54 L49.712234,54 C52.472234,54 54.712234,51.76 54.712234,49 L54.712234,17 C54.712234,14.24 52.472234,12 49.712234,12 Z M44.712234,47 L22.712234,47 L22.712234,45 L44.712234,45 L44.712234,47 Z M24.182234,40.88 L23.242234,39.12 L40.562234,30 L23.242234,20.88 L24.182234,19.12 L44.862234,30 L24.182234,40.88 Z" id="greater_than_equal" fill="#000000" fill-rule="nonzero"></path></g></g></svg>
</div>
<code style="font-size:11px;">&nbsp;col_vals_gte()</code>
</div></td>
<td class="gt_row gt_left" headers="columns" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px"><div aria-label="N_DURATION_DAY" data-balloon-pos="left">
<p><span style="color:purple;"><code>▮</code></span><code>N_DURATION_DAY</code></p>
</div></td>
<td class="gt_row gt_left" headers="values" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px"><div aria-label="0" data-balloon-pos="left">
<p><code>0</code></p>
</div></td>
<td class="gt_row gt_center" headers="precon" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:0;color:#333333;vertical-align:middle;font-size:10px;border:none;border-radius:4px;" aria-label="No modifications of the table." data-balloon-pos="left">
<svg width="25px" height="25px" viewbox="0 0 25 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="vertical-align: middle;"><g id="unchanged" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="unchanged" transform="translate(0.500000, 0.570147)"><rect id="Rectangle" x="0.125132506" y="0" width="23.749735" height="23.7894737"></rect><path d="M5.80375046,8.18194736 C3.77191832,8.18194736 2.11875046,9.83495328 2.11875046,11.8669474 C2.11875046,13.8989414 3.77191832,15.5519474 5.80375046,15.5519474 C7.8355826,15.5519474 9.48875046,13.8989414 9.48875046,11.8669474 C9.48875046,9.83495328 7.83552863,8.18194736 5.80375046,8.18194736 Z M5.80375046,14.814915 C4.17821997,14.814915 2.85578285,13.4924778 2.85578285,11.8669474 C2.85578285,10.2414169 4.17821997,8.91897975 5.80375046,8.91897975 C7.42928095,8.91897975 8.75171807,10.2414169 8.75171807,11.8669474 C8.75171807,13.4924778 7.42928095,14.814915 5.80375046,14.814915 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path><path d="M13.9638189,8.699335 C13.9364621,8.70430925 13.9091059,8.71176968 13.8842359,8.71923074 C13.7822704,8.73663967 13.6877654,8.77643115 13.6056956,8.83860518 L10.2433156,11.3852598 C10.0766886,11.5046343 9.97720993,11.6986181 9.97720993,11.9025491 C9.97720993,12.1064807 10.0766886,12.3004639 10.2433156,12.4198383 L13.6056956,14.966493 C13.891697,15.1803725 14.2970729,15.1231721 14.5109517,14.8371707 C14.7248313,14.5511692 14.6676309,14.145794 14.3816294,13.9319145 L12.5313257,12.5392127 L21.8812495,12.5392127 L21.8812495,11.2658854 L12.5313257,11.2658854 L14.3816294,9.87318364 C14.6377872,9.71650453 14.7497006,9.40066014 14.6477351,9.11714553 C14.5482564,8.83363156 14.262255,8.65954352 13.9638189,8.699335 Z" id="arrow" fill="#000000" transform="translate(15.929230, 11.894737) rotate(-180.000000) translate(-15.929230, -11.894737) "></path></g></g></svg></span></td>
<td class="gt_row gt_center" headers="eval_sym" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:5px;color:#4CA64C;vertical-align:middle;font-size:15px;border:none;" aria-label="No evaluation issues." data-balloon-pos="left">✓</span></td>
<td class="gt_row gt_right" headers="units" style="font-size: 11px; height: 40px"><code>139</code></td>
<td class="gt_row gt_right" headers="n_pass" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>137</code><br><code>0.98561</code>
</td>
<td class="gt_row gt_right" headers="n_fail" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>2</code><br><code>0.01439</code>
</td>
<td class="gt_row gt_center" headers="W" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="S" style="background-color: #FCFCFC; height: 40px"><span style="color: #CF142B;">●</span></td>
<td class="gt_row gt_center" headers="N" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="extract" style="height: 40px"><a href="data:text/csv;base64,IklEX1RSSVAiLCJDQVRfREVTVElOQVRJT05fQ0lUWSIsIkRUX1NUQVJUIiwiRFRfRU5EIiwiTl9EVVJBVElPTl9EQVkiLCJDQVRfVFJBVkVMRVJfTkFNRSIsIlZBTF9BR0VfVFJBVkVMRVIiLCJJTkRfR0VOREVSX1RSQVZFTEVSIiwiQ0FUX1RSQVZFTEVSX05BVElPTkFMSVRZIiwiQ0FUX0FDQ09NTU9EQVRJT05fVFlQRSIsIkFNVF9BQ0NPTU1PREFUSU9OX0NPU1QiLCJDQVRfVFJBTlNQT1JUQVRJT05fVFlQRSIsIkFNVF9UUkFOU1BPUlRBVElPTl9DT1NUIg0KNzIsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkENCjEyOCxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQQ0K" download="extract_0001.csv">
<button aria-label="There are 2 'fail' rows available as a CSV file." data-balloon-pos="left" style="background-color:#67C2DC;color:#FFFFFF;border:none;padding:5px;font-weight:bold;cursor:pointer;border-radius:4px;">
CSV
</button>
</a></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="status_color" style="background-color: #CF142B; height: 40px"><br></td>
<td class="gt_row gt_right" headers="i" style="color: #666666; font-size: 13px; font-weight: bold; height: 40px">2</td>
<td class="gt_row gt_left" headers="type" style="height: 40px"><div aria-label="Expect that values in `VAL_AGE_TRAVELER` should be >= `0`. " data-balloon-pos="right" style="width:fit-content;">
<div style="margin:0;padding:0;display:inline-block;height:30px;vertical-align:middle;">
<svg width="30px" height="30px" viewbox="0 0 67 67" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><title>
col_vals_gte
</title>
<g id="All-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="col_vals_gte" transform="translate(0.000000, 0.241379)"><path d="M56.712234,1 C59.1975153,1 61.4475153,2.00735931 63.076195,3.63603897 C64.7048747,5.26471863 65.712234,7.51471863 65.712234,10 L65.712234,10 L65.712234,65 L10.712234,65 C8.22695259,65 5.97695259,63.9926407 4.34827294,62.363961 C2.71959328,60.7352814 1.71223397,58.4852814 1.71223397,56 L1.71223397,56 L1.71223397,10 C1.71223397,7.51471863 2.71959328,5.26471863 4.34827294,3.63603897 C5.97695259,2.00735931 8.22695259,1 10.712234,1 L10.712234,1 Z" id="rectangle" stroke="#000000" stroke-width="2" fill="#FFFFFF"></path><path d="M49.712234,12 L17.712234,12 C14.952234,12 12.712234,14.24 12.712234,17 L12.712234,49 C12.712234,51.76 14.952234,54 17.712234,54 L49.712234,54 C52.472234,54 54.712234,51.76 54.712234,49 L54.712234,17 C54.712234,14.24 52.472234,12 49.712234,12 Z M44.712234,47 L22.712234,47 L22.712234,45 L44.712234,45 L44.712234,47 Z M24.182234,40.88 L23.242234,39.12 L40.562234,30 L23.242234,20.88 L24.182234,19.12 L44.862234,30 L24.182234,40.88 Z" id="greater_than_equal" fill="#000000" fill-rule="nonzero"></path></g></g></svg>
</div>
<code style="font-size:11px;">&nbsp;col_vals_gte()</code>
</div></td>
<td class="gt_row gt_left" headers="columns" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px"><div aria-label="VAL_AGE_TRAVELER" data-balloon-pos="left">
<p><span style="color:purple;"><code>▮</code></span><code>VAL_AGE_TRAVELER</code></p>
</div></td>
<td class="gt_row gt_left" headers="values" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px"><div aria-label="0" data-balloon-pos="left">
<p><code>0</code></p>
</div></td>
<td class="gt_row gt_center" headers="precon" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:0;color:#333333;vertical-align:middle;font-size:10px;border:none;border-radius:4px;" aria-label="No modifications of the table." data-balloon-pos="left">
<svg width="25px" height="25px" viewbox="0 0 25 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="vertical-align: middle;"><g id="unchanged" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="unchanged" transform="translate(0.500000, 0.570147)"><rect id="Rectangle" x="0.125132506" y="0" width="23.749735" height="23.7894737"></rect><path d="M5.80375046,8.18194736 C3.77191832,8.18194736 2.11875046,9.83495328 2.11875046,11.8669474 C2.11875046,13.8989414 3.77191832,15.5519474 5.80375046,15.5519474 C7.8355826,15.5519474 9.48875046,13.8989414 9.48875046,11.8669474 C9.48875046,9.83495328 7.83552863,8.18194736 5.80375046,8.18194736 Z M5.80375046,14.814915 C4.17821997,14.814915 2.85578285,13.4924778 2.85578285,11.8669474 C2.85578285,10.2414169 4.17821997,8.91897975 5.80375046,8.91897975 C7.42928095,8.91897975 8.75171807,10.2414169 8.75171807,11.8669474 C8.75171807,13.4924778 7.42928095,14.814915 5.80375046,14.814915 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path><path d="M13.9638189,8.699335 C13.9364621,8.70430925 13.9091059,8.71176968 13.8842359,8.71923074 C13.7822704,8.73663967 13.6877654,8.77643115 13.6056956,8.83860518 L10.2433156,11.3852598 C10.0766886,11.5046343 9.97720993,11.6986181 9.97720993,11.9025491 C9.97720993,12.1064807 10.0766886,12.3004639 10.2433156,12.4198383 L13.6056956,14.966493 C13.891697,15.1803725 14.2970729,15.1231721 14.5109517,14.8371707 C14.7248313,14.5511692 14.6676309,14.145794 14.3816294,13.9319145 L12.5313257,12.5392127 L21.8812495,12.5392127 L21.8812495,11.2658854 L12.5313257,11.2658854 L14.3816294,9.87318364 C14.6377872,9.71650453 14.7497006,9.40066014 14.6477351,9.11714553 C14.5482564,8.83363156 14.262255,8.65954352 13.9638189,8.699335 Z" id="arrow" fill="#000000" transform="translate(15.929230, 11.894737) rotate(-180.000000) translate(-15.929230, -11.894737) "></path></g></g></svg></span></td>
<td class="gt_row gt_center" headers="eval_sym" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:5px;color:#4CA64C;vertical-align:middle;font-size:15px;border:none;" aria-label="No evaluation issues." data-balloon-pos="left">✓</span></td>
<td class="gt_row gt_right" headers="units" style="font-size: 11px; height: 40px"><code>139</code></td>
<td class="gt_row gt_right" headers="n_pass" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>137</code><br><code>0.98561</code>
</td>
<td class="gt_row gt_right" headers="n_fail" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>2</code><br><code>0.01439</code>
</td>
<td class="gt_row gt_center" headers="W" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="S" style="background-color: #FCFCFC; height: 40px"><span style="color: #CF142B;">●</span></td>
<td class="gt_row gt_center" headers="N" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="extract" style="height: 40px"><a href="data:text/csv;base64,IklEX1RSSVAiLCJDQVRfREVTVElOQVRJT05fQ0lUWSIsIkRUX1NUQVJUIiwiRFRfRU5EIiwiTl9EVVJBVElPTl9EQVkiLCJDQVRfVFJBVkVMRVJfTkFNRSIsIlZBTF9BR0VfVFJBVkVMRVIiLCJJTkRfR0VOREVSX1RSQVZFTEVSIiwiQ0FUX1RSQVZFTEVSX05BVElPTkFMSVRZIiwiQ0FUX0FDQ09NTU9EQVRJT05fVFlQRSIsIkFNVF9BQ0NPTU1PREFUSU9OX0NPU1QiLCJDQVRfVFJBTlNQT1JUQVRJT05fVFlQRSIsIkFNVF9UUkFOU1BPUlRBVElPTl9DT1NUIg0KNzIsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkENCjEyOCxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQQ0K" download="extract_0002.csv">
<button aria-label="There are 2 'fail' rows available as a CSV file." data-balloon-pos="left" style="background-color:#67C2DC;color:#FFFFFF;border:none;padding:5px;font-weight:bold;cursor:pointer;border-radius:4px;">
CSV
</button>
</a></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="status_color" style="background-color: #CF142B; height: 40px"><br></td>
<td class="gt_row gt_right" headers="i" style="color: #666666; font-size: 13px; font-weight: bold; height: 40px">3</td>
<td class="gt_row gt_left" headers="type" style="height: 40px"><div aria-label="Expect that all values in `IND_GENDER_TRAVELER` should not be NULL. " data-balloon-pos="right" style="width:fit-content;">
<div style="margin:0;padding:0;display:inline-block;height:30px;vertical-align:middle;">
<svg width="30px" height="30px" viewbox="0 0 67 67" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><title>
col_vals_not_null
</title>
<g id="All-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="col_vals_not_null" transform="translate(0.000000, 0.551724)"><path d="M56.712234,1 C59.1975153,1 61.4475153,2.00735931 63.076195,3.63603897 C64.7048747,5.26471863 65.712234,7.51471863 65.712234,10 L65.712234,10 L65.712234,65 L10.712234,65 C8.22695259,65 5.97695259,63.9926407 4.34827294,62.363961 C2.71959328,60.7352814 1.71223397,58.4852814 1.71223397,56 L1.71223397,56 L1.71223397,10 C1.71223397,7.51471863 2.71959328,5.26471863 4.34827294,3.63603897 C5.97695259,2.00735931 8.22695259,1 10.712234,1 L10.712234,1 Z" id="rectangle" stroke="#000000" stroke-width="2" fill="#FFFFFF"></path><path d="M40.6120805,47.037834 C37.4692348,47.037834 35.0126139,45.9348613 33.712234,44.0140597 C32.4118541,45.9348613 29.9552331,47.037834 26.8123883,47.037834 C22.6574397,47.037834 16.0646712,43.4437723 16.0646712,33.8021619 C16.0646712,29.3401361 17.4715879,18.962166 30.5035862,18.962166 C30.9454018,18.962166 31.3057481,19.3225124 31.3057481,19.7643279 L31.3057481,21.3686518 C31.3057481,21.8104674 30.9454018,22.1708138 30.5035862,22.1708138 C26.6400486,22.1708138 22.4819668,25.8118774 22.4819668,33.8021619 C22.4819668,37.5090277 23.7635456,43.0270243 27.2949384,43.0270243 C29.795428,43.0270243 31.224279,40.4231312 32.0985095,38.2861221 C30.5067194,35.6101596 29.7014243,33.1034035 29.7014243,30.8347892 C29.7014243,25.6238707 31.8603677,23.7751377 33.712234,23.7751377 C35.5641002,23.7751377 37.7230437,25.6238707 37.7230437,30.8347892 C37.7230437,33.1347383 36.9396828,35.5788255 35.3290916,38.2861221 C36.6294715,41.4321009 38.243196,43.0270243 40.1295295,43.0270243 C43.6609223,43.0270243 44.9425012,37.5090277 44.9425012,33.8021619 C44.9425012,25.8118774 40.7844193,22.1708138 36.9208817,22.1708138 C36.4759329,22.1708138 36.1187198,21.8104674 36.1187198,21.3686518 L36.1187198,19.7643279 C36.1187198,19.3225124 36.4759329,18.962166 36.9208817,18.962166 C49.9528801,18.962166 51.3597967,29.3401361 51.3597967,33.8021619 C51.3597967,43.4437723 44.7670282,47.037834 40.6120805,47.037834 Z" id="omega" fill="#000000" fill-rule="nonzero"></path><path d="M33,7.93597705 C33.2761424,7.93597705 33.5,8.15983467 33.5,8.43597705 L33.5,57.564023 C33.5,57.8401653 33.2761424,58.064023 33,58.064023 C32.7238576,58.064023 32.5,57.8401653 32.5,57.564023 L32.5,8.43597705 C32.5,8.15983467 32.7238576,7.93597705 33,7.93597705 Z" id="line_black" fill="#000000" transform="translate(33.000000, 33.000000) rotate(-320.000000) translate(-33.000000, -33.000000) "></path><polygon id="line_white" fill="#FFFFFF" transform="translate(34.899496, 32.153303) rotate(-320.000000) translate(-34.899496, -32.153303) " points="34.3994962 8.54160469 35.3994962 8.54160469 35.3994962 55.7650019 34.3994962 55.7650019"></polygon></g></g></svg>
</div>
<code style="font-size:10px;">&nbsp;col_vals_not_null()</code>
</div></td>
<td class="gt_row gt_left" headers="columns" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px"><div aria-label="IND_GENDER_TRAVELER" data-balloon-pos="left">
<p><span style="color:purple;"><code>▮</code></span><code>IND_GENDER_TRAVELER</code></p>
</div></td>
<td class="gt_row gt_left" headers="values" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px">—</td>
<td class="gt_row gt_center" headers="precon" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:0;color:#333333;vertical-align:middle;font-size:10px;border:none;border-radius:4px;" aria-label="No modifications of the table." data-balloon-pos="left">
<svg width="25px" height="25px" viewbox="0 0 25 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="vertical-align: middle;"><g id="unchanged" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="unchanged" transform="translate(0.500000, 0.570147)"><rect id="Rectangle" x="0.125132506" y="0" width="23.749735" height="23.7894737"></rect><path d="M5.80375046,8.18194736 C3.77191832,8.18194736 2.11875046,9.83495328 2.11875046,11.8669474 C2.11875046,13.8989414 3.77191832,15.5519474 5.80375046,15.5519474 C7.8355826,15.5519474 9.48875046,13.8989414 9.48875046,11.8669474 C9.48875046,9.83495328 7.83552863,8.18194736 5.80375046,8.18194736 Z M5.80375046,14.814915 C4.17821997,14.814915 2.85578285,13.4924778 2.85578285,11.8669474 C2.85578285,10.2414169 4.17821997,8.91897975 5.80375046,8.91897975 C7.42928095,8.91897975 8.75171807,10.2414169 8.75171807,11.8669474 C8.75171807,13.4924778 7.42928095,14.814915 5.80375046,14.814915 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path><path d="M13.9638189,8.699335 C13.9364621,8.70430925 13.9091059,8.71176968 13.8842359,8.71923074 C13.7822704,8.73663967 13.6877654,8.77643115 13.6056956,8.83860518 L10.2433156,11.3852598 C10.0766886,11.5046343 9.97720993,11.6986181 9.97720993,11.9025491 C9.97720993,12.1064807 10.0766886,12.3004639 10.2433156,12.4198383 L13.6056956,14.966493 C13.891697,15.1803725 14.2970729,15.1231721 14.5109517,14.8371707 C14.7248313,14.5511692 14.6676309,14.145794 14.3816294,13.9319145 L12.5313257,12.5392127 L21.8812495,12.5392127 L21.8812495,11.2658854 L12.5313257,11.2658854 L14.3816294,9.87318364 C14.6377872,9.71650453 14.7497006,9.40066014 14.6477351,9.11714553 C14.5482564,8.83363156 14.262255,8.65954352 13.9638189,8.699335 Z" id="arrow" fill="#000000" transform="translate(15.929230, 11.894737) rotate(-180.000000) translate(-15.929230, -11.894737) "></path></g></g></svg></span></td>
<td class="gt_row gt_center" headers="eval_sym" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:5px;color:#4CA64C;vertical-align:middle;font-size:15px;border:none;" aria-label="No evaluation issues." data-balloon-pos="left">✓</span></td>
<td class="gt_row gt_right" headers="units" style="font-size: 11px; height: 40px"><code>139</code></td>
<td class="gt_row gt_right" headers="n_pass" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>137</code><br><code>0.98561</code>
</td>
<td class="gt_row gt_right" headers="n_fail" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>2</code><br><code>0.01439</code>
</td>
<td class="gt_row gt_center" headers="W" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="S" style="background-color: #FCFCFC; height: 40px"><span style="color: #CF142B;">●</span></td>
<td class="gt_row gt_center" headers="N" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="extract" style="height: 40px"><a href="data:text/csv;base64,IklEX1RSSVAiLCJDQVRfREVTVElOQVRJT05fQ0lUWSIsIkRUX1NUQVJUIiwiRFRfRU5EIiwiTl9EVVJBVElPTl9EQVkiLCJDQVRfVFJBVkVMRVJfTkFNRSIsIlZBTF9BR0VfVFJBVkVMRVIiLCJJTkRfR0VOREVSX1RSQVZFTEVSIiwiQ0FUX1RSQVZFTEVSX05BVElPTkFMSVRZIiwiQ0FUX0FDQ09NTU9EQVRJT05fVFlQRSIsIkFNVF9BQ0NPTU1PREFUSU9OX0NPU1QiLCJDQVRfVFJBTlNQT1JUQVRJT05fVFlQRSIsIkFNVF9UUkFOU1BPUlRBVElPTl9DT1NUIg0KNzIsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkENCjEyOCxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQQ0K" download="extract_0003.csv">
<button aria-label="There are 2 'fail' rows available as a CSV file." data-balloon-pos="left" style="background-color:#67C2DC;color:#FFFFFF;border:none;padding:5px;font-weight:bold;cursor:pointer;border-radius:4px;">
CSV
</button>
</a></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="status_color" style="background-color: #CF142B; height: 40px"><br></td>
<td class="gt_row gt_right" headers="i" style="color: #666666; font-size: 13px; font-weight: bold; height: 40px">4</td>
<td class="gt_row gt_left" headers="type" style="height: 40px"><div aria-label="Expect that values in `IND_GENDER_TRAVELER` should be in the set of `Male`, `Female`. " data-balloon-pos="right" style="width:fit-content;">
<div style="margin:0;padding:0;display:inline-block;height:30px;vertical-align:middle;">
<svg width="30px" height="30px" viewbox="0 0 67 67" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><title>
col_vals_in_set
</title>
<g id="All-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="col_vals_in_set" transform="translate(0.000000, 0.172414)"><path d="M56.712234,1 C59.1975153,1 61.4475153,2.00735931 63.076195,3.63603897 C64.7048747,5.26471863 65.712234,7.51471863 65.712234,10 L65.712234,10 L65.712234,65 L10.712234,65 C8.22695259,65 5.97695259,63.9926407 4.34827294,62.363961 C2.71959328,60.7352814 1.71223397,58.4852814 1.71223397,56 L1.71223397,56 L1.71223397,10 C1.71223397,7.51471863 2.71959328,5.26471863 4.34827294,3.63603897 C5.97695259,2.00735931 8.22695259,1 10.712234,1 L10.712234,1 Z" id="rectangle" stroke="#000000" stroke-width="2" fill="#FFFFFF"></path><path d="M44.127969,41.1538382 L31.0814568,41.1538382 C29.9510748,41.1536429 28.8827052,40.9256134 27.9079888,40.5136953 C26.4467442,39.8960136 25.19849,38.8599685 24.3189894,37.5577099 C23.8792391,36.906727 23.5314818,36.1899233 23.2936866,35.4252675 C23.2130217,35.16589 23.1460289,34.9005554 23.0913409,34.6307286 L44.1278714,34.6307286 C45.028466,34.6306309 45.7586488,33.9004481 45.7586488,32.9998535 C45.7586488,32.0992589 45.028466,31.3690761 44.1278714,31.3690761 L23.0905596,31.3690761 C23.1990567,30.8337194 23.3597028,30.3180894 23.5675173,29.8264831 C24.185199,28.3652386 25.2212442,27.1169844 26.5236004,26.2374838 C27.1745833,25.7977334 27.891387,25.4499762 28.6560428,25.2122786 C29.4208939,24.9744833 30.2334994,24.8459665 31.0813591,24.8459665 L44.1277737,24.8459665 C45.0283683,24.8459665 45.7586488,24.1157837 45.7586488,23.2151891 C45.7586488,22.3145945 45.0283683,21.5844117 44.1277737,21.5844117 L31.0813591,21.5844117 C29.5096643,21.5844117 28.0039858,21.9038483 26.6373711,22.4820765 C24.5866678,23.3498583 22.8469049,24.7950871 21.6163267,26.616296 C20.3856508,28.4362354 19.665136,30.6413347 19.6658191,33.0000488 C19.6658191,34.5717436 19.9852563,36.0774222 20.5635822,37.4440369 C21.4312663,39.4947402 22.8765927,41.2345031 24.697704,42.4650813 C26.5176434,43.6957572 28.7227427,44.4155883 31.0814568,44.4155883 L44.1278714,44.4155883 C45.028466,44.4155883 45.7586488,43.6854055 45.7586488,42.7848109 C45.7586488,41.8842163 45.0285636,41.1538382 44.127969,41.1538382 Z" id="set_of" fill="#000000" fill-rule="nonzero"></path></g></g></svg>
</div>
<code style="font-size:11px;">&nbsp;col_vals_in_set()</code>
</div></td>
<td class="gt_row gt_left" headers="columns" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px"><div aria-label="IND_GENDER_TRAVELER" data-balloon-pos="left">
<p><span style="color:purple;"><code>▮</code></span><code>IND_GENDER_TRAVELER</code></p>
</div></td>
<td class="gt_row gt_left" headers="values" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px"><div aria-label="Male, Female" data-balloon-pos="left">
<p><code>Male, Female</code></p>
</div></td>
<td class="gt_row gt_center" headers="precon" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:0;color:#333333;vertical-align:middle;font-size:10px;border:none;border-radius:4px;" aria-label="No modifications of the table." data-balloon-pos="left">
<svg width="25px" height="25px" viewbox="0 0 25 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="vertical-align: middle;"><g id="unchanged" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="unchanged" transform="translate(0.500000, 0.570147)"><rect id="Rectangle" x="0.125132506" y="0" width="23.749735" height="23.7894737"></rect><path d="M5.80375046,8.18194736 C3.77191832,8.18194736 2.11875046,9.83495328 2.11875046,11.8669474 C2.11875046,13.8989414 3.77191832,15.5519474 5.80375046,15.5519474 C7.8355826,15.5519474 9.48875046,13.8989414 9.48875046,11.8669474 C9.48875046,9.83495328 7.83552863,8.18194736 5.80375046,8.18194736 Z M5.80375046,14.814915 C4.17821997,14.814915 2.85578285,13.4924778 2.85578285,11.8669474 C2.85578285,10.2414169 4.17821997,8.91897975 5.80375046,8.91897975 C7.42928095,8.91897975 8.75171807,10.2414169 8.75171807,11.8669474 C8.75171807,13.4924778 7.42928095,14.814915 5.80375046,14.814915 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path><path d="M13.9638189,8.699335 C13.9364621,8.70430925 13.9091059,8.71176968 13.8842359,8.71923074 C13.7822704,8.73663967 13.6877654,8.77643115 13.6056956,8.83860518 L10.2433156,11.3852598 C10.0766886,11.5046343 9.97720993,11.6986181 9.97720993,11.9025491 C9.97720993,12.1064807 10.0766886,12.3004639 10.2433156,12.4198383 L13.6056956,14.966493 C13.891697,15.1803725 14.2970729,15.1231721 14.5109517,14.8371707 C14.7248313,14.5511692 14.6676309,14.145794 14.3816294,13.9319145 L12.5313257,12.5392127 L21.8812495,12.5392127 L21.8812495,11.2658854 L12.5313257,11.2658854 L14.3816294,9.87318364 C14.6377872,9.71650453 14.7497006,9.40066014 14.6477351,9.11714553 C14.5482564,8.83363156 14.262255,8.65954352 13.9638189,8.699335 Z" id="arrow" fill="#000000" transform="translate(15.929230, 11.894737) rotate(-180.000000) translate(-15.929230, -11.894737) "></path></g></g></svg></span></td>
<td class="gt_row gt_center" headers="eval_sym" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:5px;color:#4CA64C;vertical-align:middle;font-size:15px;border:none;" aria-label="No evaluation issues." data-balloon-pos="left">✓</span></td>
<td class="gt_row gt_right" headers="units" style="font-size: 11px; height: 40px"><code>139</code></td>
<td class="gt_row gt_right" headers="n_pass" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>137</code><br><code>0.98561</code>
</td>
<td class="gt_row gt_right" headers="n_fail" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>2</code><br><code>0.01439</code>
</td>
<td class="gt_row gt_center" headers="W" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="S" style="background-color: #FCFCFC; height: 40px"><span style="color: #CF142B;">●</span></td>
<td class="gt_row gt_center" headers="N" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="extract" style="height: 40px"><a href="data:text/csv;base64,IklEX1RSSVAiLCJDQVRfREVTVElOQVRJT05fQ0lUWSIsIkRUX1NUQVJUIiwiRFRfRU5EIiwiTl9EVVJBVElPTl9EQVkiLCJDQVRfVFJBVkVMRVJfTkFNRSIsIlZBTF9BR0VfVFJBVkVMRVIiLCJJTkRfR0VOREVSX1RSQVZFTEVSIiwiQ0FUX1RSQVZFTEVSX05BVElPTkFMSVRZIiwiQ0FUX0FDQ09NTU9EQVRJT05fVFlQRSIsIkFNVF9BQ0NPTU1PREFUSU9OX0NPU1QiLCJDQVRfVFJBTlNQT1JUQVRJT05fVFlQRSIsIkFNVF9UUkFOU1BPUlRBVElPTl9DT1NUIg0KNzIsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkEsTkENCjEyOCxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQSxOQQ0K" download="extract_0004.csv">
<button aria-label="There are 2 'fail' rows available as a CSV file." data-balloon-pos="left" style="background-color:#67C2DC;color:#FFFFFF;border:none;padding:5px;font-weight:bold;cursor:pointer;border-radius:4px;">
CSV
</button>
</a></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="status_color" style="background-color: #CF142B; height: 40px"><br></td>
<td class="gt_row gt_right" headers="i" style="color: #666666; font-size: 13px; font-weight: bold; height: 40px">5</td>
<td class="gt_row gt_left" headers="type" style="height: 40px"><div aria-label="Expect that column `DT_START` is of type: Date. " data-balloon-pos="right" style="width:fit-content;">
<div style="margin:0;padding:0;display:inline-block;height:30px;vertical-align:middle;">
<svg width="30px" height="30px" viewbox="0 0 67 67" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><title>
col_is_date
</title>
<g id="All-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="col_is_date" transform="translate(0.000000, 0.379310)"><path d="M56.712234,1.01466935 C59.1975153,1.01466935 61.4475153,2.02202867 63.076195,3.65070832 C64.7048747,5.27938798 65.712234,7.52938798 65.712234,10.0146694 L65.712234,10.0146694 L65.712234,65.0146694 L10.712234,65.0146694 C8.22695259,65.0146694 5.97695259,64.00731 4.34827294,62.3786304 C2.71959328,60.7499507 1.71223397,58.4999507 1.71223397,56.0146694 L1.71223397,56.0146694 L1.71223397,10.0146694 C1.71223397,7.52938798 2.71959328,5.27938798 4.34827294,3.65070832 C5.97695259,2.02202867 8.22695259,1.01466935 10.712234,1.01466935 L10.712234,1.01466935 Z" id="rectangle" stroke="#000000" stroke-width="2" fill="#FFFFFF"></path><rect id="column" fill="#000000" x="12.2117153" y="12.0146694" width="20" height="42" rx="1"></rect><path d="M40.7190873,43.0146694 L40.7190873,24.2256069 L46.9651811,24.2256069 C48.8271696,24.2256069 50.3315491,24.4329616 51.4783647,24.8476772 C52.6251803,25.2623928 53.6175206,25.9648597 54.4554155,26.955099 C55.7841981,28.5293257 56.4485795,30.6028726 56.4485795,33.1758022 C56.4485795,36.2988647 55.6233925,38.7194134 53.9729936,40.4375209 C52.3225947,42.1556285 49.9993758,43.0146694 47.003267,43.0146694 L40.7190873,43.0146694 Z M43.385103,41.0215053 L46.800142,41.0215053 C49.2376542,41.0215053 50.9641994,40.3655874 51.9798295,39.0537319 C53.0716319,37.6572405 53.6175248,35.7825848 53.6175248,33.4297084 C53.6175248,31.220713 53.0800953,29.4857043 52.0052202,28.2246303 C51.3535242,27.4544441 50.5748861,26.9275939 49.6692827,26.6440639 C48.7636792,26.3605338 47.4010626,26.2187709 45.581392,26.2187709 L43.385103,26.2187709 L43.385103,41.0215053 Z" id="D" fill="#000000"></path></g></g></svg>
</div>
<code style="font-size:11px;">&nbsp;col_is_date()</code>
</div></td>
<td class="gt_row gt_left" headers="columns" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px"><div aria-label="DT_START" data-balloon-pos="left">
<p><span style="color:purple;"><code>▮</code></span><code>DT_START</code></p>
</div></td>
<td class="gt_row gt_left" headers="values" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px">—</td>
<td class="gt_row gt_center" headers="precon" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:0;color:#333333;vertical-align:middle;font-size:10px;border:none;border-radius:4px;" aria-label="No modifications of the table." data-balloon-pos="left">
<svg width="25px" height="25px" viewbox="0 0 25 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="vertical-align: middle;"><g id="unchanged" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="unchanged" transform="translate(0.500000, 0.570147)"><rect id="Rectangle" x="0.125132506" y="0" width="23.749735" height="23.7894737"></rect><path d="M5.80375046,8.18194736 C3.77191832,8.18194736 2.11875046,9.83495328 2.11875046,11.8669474 C2.11875046,13.8989414 3.77191832,15.5519474 5.80375046,15.5519474 C7.8355826,15.5519474 9.48875046,13.8989414 9.48875046,11.8669474 C9.48875046,9.83495328 7.83552863,8.18194736 5.80375046,8.18194736 Z M5.80375046,14.814915 C4.17821997,14.814915 2.85578285,13.4924778 2.85578285,11.8669474 C2.85578285,10.2414169 4.17821997,8.91897975 5.80375046,8.91897975 C7.42928095,8.91897975 8.75171807,10.2414169 8.75171807,11.8669474 C8.75171807,13.4924778 7.42928095,14.814915 5.80375046,14.814915 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path><path d="M13.9638189,8.699335 C13.9364621,8.70430925 13.9091059,8.71176968 13.8842359,8.71923074 C13.7822704,8.73663967 13.6877654,8.77643115 13.6056956,8.83860518 L10.2433156,11.3852598 C10.0766886,11.5046343 9.97720993,11.6986181 9.97720993,11.9025491 C9.97720993,12.1064807 10.0766886,12.3004639 10.2433156,12.4198383 L13.6056956,14.966493 C13.891697,15.1803725 14.2970729,15.1231721 14.5109517,14.8371707 C14.7248313,14.5511692 14.6676309,14.145794 14.3816294,13.9319145 L12.5313257,12.5392127 L21.8812495,12.5392127 L21.8812495,11.2658854 L12.5313257,11.2658854 L14.3816294,9.87318364 C14.6377872,9.71650453 14.7497006,9.40066014 14.6477351,9.11714553 C14.5482564,8.83363156 14.262255,8.65954352 13.9638189,8.699335 Z" id="arrow" fill="#000000" transform="translate(15.929230, 11.894737) rotate(-180.000000) translate(-15.929230, -11.894737) "></path></g></g></svg></span></td>
<td class="gt_row gt_center" headers="eval_sym" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:5px;color:#4CA64C;vertical-align:middle;font-size:15px;border:none;" aria-label="No evaluation issues." data-balloon-pos="left">✓</span></td>
<td class="gt_row gt_right" headers="units" style="font-size: 11px; height: 40px"><code>1</code></td>
<td class="gt_row gt_right" headers="n_pass" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>0</code><br><code>0</code>
</td>
<td class="gt_row gt_right" headers="n_fail" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>1</code><br><code>1</code>
</td>
<td class="gt_row gt_center" headers="W" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="S" style="background-color: #FCFCFC; height: 40px"><span style="color: #CF142B;">●</span></td>
<td class="gt_row gt_center" headers="N" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="extract" style="height: 40px">—</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="status_color" style="background-color: #CF142B; height: 40px"><br></td>
<td class="gt_row gt_right" headers="i" style="color: #666666; font-size: 13px; font-weight: bold; height: 40px">6</td>
<td class="gt_row gt_left" headers="type" style="height: 40px"><div aria-label="Expect that column `DT_END` is of type: Date. " data-balloon-pos="right" style="width:fit-content;">
<div style="margin:0;padding:0;display:inline-block;height:30px;vertical-align:middle;">
<svg width="30px" height="30px" viewbox="0 0 67 67" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink"><title>
col_is_date
</title>
<g id="All-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="col_is_date" transform="translate(0.000000, 0.379310)"><path d="M56.712234,1.01466935 C59.1975153,1.01466935 61.4475153,2.02202867 63.076195,3.65070832 C64.7048747,5.27938798 65.712234,7.52938798 65.712234,10.0146694 L65.712234,10.0146694 L65.712234,65.0146694 L10.712234,65.0146694 C8.22695259,65.0146694 5.97695259,64.00731 4.34827294,62.3786304 C2.71959328,60.7499507 1.71223397,58.4999507 1.71223397,56.0146694 L1.71223397,56.0146694 L1.71223397,10.0146694 C1.71223397,7.52938798 2.71959328,5.27938798 4.34827294,3.65070832 C5.97695259,2.02202867 8.22695259,1.01466935 10.712234,1.01466935 L10.712234,1.01466935 Z" id="rectangle" stroke="#000000" stroke-width="2" fill="#FFFFFF"></path><rect id="column" fill="#000000" x="12.2117153" y="12.0146694" width="20" height="42" rx="1"></rect><path d="M40.7190873,43.0146694 L40.7190873,24.2256069 L46.9651811,24.2256069 C48.8271696,24.2256069 50.3315491,24.4329616 51.4783647,24.8476772 C52.6251803,25.2623928 53.6175206,25.9648597 54.4554155,26.955099 C55.7841981,28.5293257 56.4485795,30.6028726 56.4485795,33.1758022 C56.4485795,36.2988647 55.6233925,38.7194134 53.9729936,40.4375209 C52.3225947,42.1556285 49.9993758,43.0146694 47.003267,43.0146694 L40.7190873,43.0146694 Z M43.385103,41.0215053 L46.800142,41.0215053 C49.2376542,41.0215053 50.9641994,40.3655874 51.9798295,39.0537319 C53.0716319,37.6572405 53.6175248,35.7825848 53.6175248,33.4297084 C53.6175248,31.220713 53.0800953,29.4857043 52.0052202,28.2246303 C51.3535242,27.4544441 50.5748861,26.9275939 49.6692827,26.6440639 C48.7636792,26.3605338 47.4010626,26.2187709 45.581392,26.2187709 L43.385103,26.2187709 L43.385103,41.0215053 Z" id="D" fill="#000000"></path></g></g></svg>
</div>
<code style="font-size:11px;">&nbsp;col_is_date()</code>
</div></td>
<td class="gt_row gt_left" headers="columns" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px"><div aria-label="DT_END" data-balloon-pos="left">
<p><span style="color:purple;"><code>▮</code></span><code>DT_END</code></p>
</div></td>
<td class="gt_row gt_left" headers="values" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; height: 40px">—</td>
<td class="gt_row gt_center" headers="precon" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:0;color:#333333;vertical-align:middle;font-size:10px;border:none;border-radius:4px;" aria-label="No modifications of the table." data-balloon-pos="left">
<svg width="25px" height="25px" viewbox="0 0 25 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="vertical-align: middle;"><g id="unchanged" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="unchanged" transform="translate(0.500000, 0.570147)"><rect id="Rectangle" x="0.125132506" y="0" width="23.749735" height="23.7894737"></rect><path d="M5.80375046,8.18194736 C3.77191832,8.18194736 2.11875046,9.83495328 2.11875046,11.8669474 C2.11875046,13.8989414 3.77191832,15.5519474 5.80375046,15.5519474 C7.8355826,15.5519474 9.48875046,13.8989414 9.48875046,11.8669474 C9.48875046,9.83495328 7.83552863,8.18194736 5.80375046,8.18194736 Z M5.80375046,14.814915 C4.17821997,14.814915 2.85578285,13.4924778 2.85578285,11.8669474 C2.85578285,10.2414169 4.17821997,8.91897975 5.80375046,8.91897975 C7.42928095,8.91897975 8.75171807,10.2414169 8.75171807,11.8669474 C8.75171807,13.4924778 7.42928095,14.814915 5.80375046,14.814915 Z" id="Shape" fill="#000000" fill-rule="nonzero"></path><path d="M13.9638189,8.699335 C13.9364621,8.70430925 13.9091059,8.71176968 13.8842359,8.71923074 C13.7822704,8.73663967 13.6877654,8.77643115 13.6056956,8.83860518 L10.2433156,11.3852598 C10.0766886,11.5046343 9.97720993,11.6986181 9.97720993,11.9025491 C9.97720993,12.1064807 10.0766886,12.3004639 10.2433156,12.4198383 L13.6056956,14.966493 C13.891697,15.1803725 14.2970729,15.1231721 14.5109517,14.8371707 C14.7248313,14.5511692 14.6676309,14.145794 14.3816294,13.9319145 L12.5313257,12.5392127 L21.8812495,12.5392127 L21.8812495,11.2658854 L12.5313257,11.2658854 L14.3816294,9.87318364 C14.6377872,9.71650453 14.7497006,9.40066014 14.6477351,9.11714553 C14.5482564,8.83363156 14.262255,8.65954352 13.9638189,8.699335 Z" id="arrow" fill="#000000" transform="translate(15.929230, 11.894737) rotate(-180.000000) translate(-15.929230, -11.894737) "></path></g></g></svg></span></td>
<td class="gt_row gt_center" headers="eval_sym" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px"><span style="background:transparent;padding:5px;color:#4CA64C;vertical-align:middle;font-size:15px;border:none;" aria-label="No evaluation issues." data-balloon-pos="left">✓</span></td>
<td class="gt_row gt_right" headers="units" style="font-size: 11px; height: 40px"><code>1</code></td>
<td class="gt_row gt_right" headers="n_pass" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>0</code><br><code>0</code>
</td>
<td class="gt_row gt_right" headers="n_fail" style="border-left-width: 1px; border-left-style: dashed; border-left-color: #E5E5E5; font-size: 11px; height: 40px">
<code>1</code><br><code>1</code>
</td>
<td class="gt_row gt_center" headers="W" style="border-left-width: 1px; border-left-style: solid; border-left-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="S" style="background-color: #FCFCFC; height: 40px"><span style="color: #CF142B;">●</span></td>
<td class="gt_row gt_center" headers="N" style="border-right-width: 1px; border-right-style: solid; border-right-color: #D3D3D3; background-color: #FCFCFC; height: 40px">—</td>
<td class="gt_row gt_center" headers="extract" style="height: 40px">—</td>
</tr>
</tbody>
<tfoot class="gt_sourcenotes"><tr class="odd">
<td colspan="14" class="gt_sourcenote">
<span style="background-color:#FFF;color:#444;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin-left:10px;border:solid 1px #999999;font-variant-numeric:tabular-nums;border-radius:0;padding:2px 10px 2px 10px;padding:2px 10px 2px 10px;">2024-07-04 09:52:39 +07</span> <span style="background-color:#FFF;color:#444;padding:0.5em 0.5em;position:inherit;margin:5px 1px 5px 0;border:solid 1px #999999;font-variant-numeric:tabular-nums;border-radius:0;padding:2px 10px 2px 10px;">&lt; 1 s</span> <span style="background-color:#FFF;color:#444;padding:0.5em 0.5em;position:inherit;text-transform:uppercase;margin:5px 1px 5px -1px;border:solid 1px #999999;font-variant-numeric:tabular-nums;border-radius:0;padding:2px 10px 2px 10px;">2024-07-04 09:52:39 +07</span>
</td>
</tr></tfoot>
</table>
</div>
</div>
</div>
<p>Cool! Không chỉ kiểm tra được tính đúng đắn của dữ liệu, cũng có thể xác định được biến nào không tuân theo quy tắc đặt tên.</p>
</section><section id="data-discoverability" class="level1"><h1>Data Discoverability</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>cols_data <span class="ot">&lt;-</span> <span class="fu">names</span>(trip_data)</span>
<span id="cb6-2"><a href="#cb6-2"></a>cols_data_split <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(cols_data,<span class="st">"_"</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a>cols_components <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="at">variable =</span> cols_data,</span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="at">level1 =</span> <span class="fu">vapply</span>(cols_data_split, <span class="at">FUN =</span> <span class="cf">function</span>(x) x[<span class="dv">1</span>], <span class="at">FUN.VALUE =</span> <span class="fu">character</span>(<span class="dv">1</span>)),</span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="at">level2 =</span> <span class="fu">vapply</span>(cols_data_split, <span class="at">FUN =</span> <span class="cf">function</span>(x) x[<span class="dv">2</span>], <span class="at">FUN.VALUE =</span> <span class="fu">character</span>(<span class="dv">1</span>))</span>
<span id="cb6-7"><a href="#cb6-7"></a>)</span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="fu">head</span>(cols_components)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              variable level1      level2
1              ID_TRIP     ID        TRIP
2 CAT_DESTINATION_CITY    CAT DESTINATION
3             DT_START     DT       START
4               DT_END     DT         END
5       N_DURATION_DAY      N    DURATION
6    CAT_TRAVELER_NAME    CAT    TRAVELER</code></pre>
</div>
</div>
<p>Đây là một cách để xây dựng metadata, chúng ta có thể touch một cách interactive với:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">datatable</span>(cols_components,  <span class="at">filter =</span> <span class="fu">list</span>(<span class="at">position =</span> <span class="st">'top'</span>, <span class="at">clear =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-38da5d6e8848be63810c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-38da5d6e8848be63810c">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13"],["ID_TRIP","CAT_DESTINATION_CITY","DT_START","DT_END","N_DURATION_DAY","CAT_TRAVELER_NAME","VAL_AGE_TRAVELER","IND_GENDER_TRAVELER","CAT_TRAVELER_NATIONALITY","CAT_ACCOMMODATION_TYPE","AMT_ACCOMMODATION_COST","CAT_TRANSPORTATION_TYPE","AMT_TRANSPORTATION_COST"],["ID","CAT","DT","DT","N","CAT","VAL","IND","CAT","CAT","AMT","CAT","AMT"],["TRIP","DESTINATION","START","END","DURATION","TRAVELER","AGE","GENDER","TRAVELER","ACCOMMODATION","ACCOMMODATION","TRANSPORTATION","TRANSPORTATION"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variable<\/th>\n      <th>level1<\/th>\n      <th>level2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"variable","targets":1},{"name":"level1","targets":2},{"name":"level2","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Cũng có thể visualize thành một tree như bên dưới:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">library</span>(collapsibleTree)</span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="fu">collapsibleTree</span>(cols_components, </span>
<span id="cb9-3"><a href="#cb9-3"></a>                <span class="at">hierarchy =</span> <span class="fu">paste0</span>(<span class="st">"level"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb9-4"><a href="#cb9-4"></a>                <span class="at">nodeSize =</span> <span class="st">"leafCount"</span></span>
<span id="cb9-5"><a href="#cb9-5"></a>                )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="collapsibleTree html-widget html-fill-item" id="htmlwidget-848b250e5c4166207b6a" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-848b250e5c4166207b6a">{"x":{"data":{"name":"cols_components","SizeOfNode":34.41,"children":[{"name":"ID","SizeOfNode":9.93,"children":[{"name":"TRIP","SizeOfNode":9.93}]},{"name":"CAT","SizeOfNode":19.87,"children":[{"name":"DESTINATION","SizeOfNode":9.93},{"name":"TRAVELER","SizeOfNode":9.93},{"name":"ACCOMMODATION","SizeOfNode":9.93},{"name":"TRANSPORTATION","SizeOfNode":9.93}]},{"name":"DT","SizeOfNode":14.05,"children":[{"name":"START","SizeOfNode":9.93},{"name":"END","SizeOfNode":9.93}]},{"name":"N","SizeOfNode":9.93,"children":[{"name":"DURATION","SizeOfNode":9.93}]},{"name":"VAL","SizeOfNode":9.93,"children":[{"name":"AGE","SizeOfNode":9.93}]},{"name":"IND","SizeOfNode":9.93,"children":[{"name":"GENDER","SizeOfNode":9.93}]},{"name":"AMT","SizeOfNode":14.05,"children":[{"name":"ACCOMMODATION","SizeOfNode":9.93},{"name":"TRANSPORTATION","SizeOfNode":9.93}]}]},"options":{"hierarchy":["level1","level2"],"input":null,"attribute":"leafCount","linkLength":null,"fontSize":10,"tooltip":false,"collapsed":true,"zoomable":true,"margin":{"top":20,"bottom":20,"left":124.41,"right":95},"fill":"lightsteelblue"}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Đây là cách xem từ kiểu dữ liệu -&gt; chủ thể, chúng ta cũng có thể làm ngược lại:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">collapsibleTree</span>(cols_components, </span>
<span id="cb10-2"><a href="#cb10-2"></a>                <span class="at">hierarchy =</span> <span class="fu">paste0</span>(<span class="st">"level"</span>, <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)),</span>
<span id="cb10-3"><a href="#cb10-3"></a>                <span class="at">nodeSize =</span> <span class="st">"leafCount"</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>                )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="collapsibleTree html-widget html-fill-item" id="htmlwidget-7e3f955f97ec0b1d8268" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7e3f955f97ec0b1d8268">{"x":{"data":{"name":"cols_components","SizeOfNode":34.41,"children":[{"name":"TRIP","SizeOfNode":9.93,"children":[{"name":"ID","SizeOfNode":9.93}]},{"name":"DESTINATION","SizeOfNode":9.93,"children":[{"name":"CAT","SizeOfNode":9.93}]},{"name":"START","SizeOfNode":9.93,"children":[{"name":"DT","SizeOfNode":9.93}]},{"name":"END","SizeOfNode":9.93,"children":[{"name":"DT","SizeOfNode":9.93}]},{"name":"DURATION","SizeOfNode":9.93,"children":[{"name":"N","SizeOfNode":9.93}]},{"name":"TRAVELER","SizeOfNode":9.93,"children":[{"name":"CAT","SizeOfNode":9.93}]},{"name":"AGE","SizeOfNode":9.93,"children":[{"name":"VAL","SizeOfNode":9.93}]},{"name":"GENDER","SizeOfNode":9.93,"children":[{"name":"IND","SizeOfNode":9.93}]},{"name":"ACCOMMODATION","SizeOfNode":14.05,"children":[{"name":"CAT","SizeOfNode":9.93},{"name":"AMT","SizeOfNode":9.93}]},{"name":"TRANSPORTATION","SizeOfNode":14.05,"children":[{"name":"CAT","SizeOfNode":9.93},{"name":"AMT","SizeOfNode":9.93}]}]},"options":{"hierarchy":["level2","level1"],"input":null,"attribute":"leafCount","linkLength":null,"fontSize":10,"tooltip":false,"collapsed":true,"zoomable":true,"margin":{"top":20,"bottom":20,"left":124.41,"right":40},"fill":"lightsteelblue"}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Bộ dữ liệu mình sử dụng khá nghèo nàn và tập trung về một chủ thể duy nhất là <code>TRIP</code>, nên khả năng minh họa không được phong phú 😂. Ngoài ra, việc đặt tên như thế cũng giúp ta dễ dàng gọi biến ở IDE.</p>
</section><section id="data-wrangling" class="level1"><h1>Data Wrangling</h1>
<p>Tương tự, với việc sử dụng một bộ từ điển có hệ thống, lớp lang cũng support chúng ta trong việc biến đổi dữ liệu. Ví dụ chúng ta có thể tận dụng “select helpers” trong gói <code>dplyr</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb11-2"><a href="#cb11-2"></a>trip_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(trip_data)</span>
<span id="cb11-3"><a href="#cb11-3"></a>trip_data <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="sc">!</span><span class="fu">is.na</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="fu">group_by</span>(CAT_TRAVELER_NATIONALITY) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="fu">summarize</span>(</span>
<span id="cb11-7"><a href="#cb11-7"></a>    <span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"DT_"</span>), <span class="fu">c</span>(min,max))</span>
<span id="cb11-8"><a href="#cb11-8"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 42 × 5
   CAT_TRAVELER_NATIONALITY DT_START_1 DT_START_2 DT_END_1   DT_END_2 
   &lt;chr&gt;                    &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;    
 1 American                 1/1/2023   9/15/2022  1/1/2023   9/22/2022
 2 Australian               11/20/2023 9/5/2022   11/30/2023 9/14/2022
 3 Brazil                   4/3/2024   4/3/2024   4/10/2024  4/10/2024
 4 Brazilian                1/15/2024  8/1/2023   1/12/2024  8/10/2023
 5 British                  1/1/2025   8/20/2022  1/15/2023  9/2/2022 
 6 Cambodia                 9/10/2022  9/10/2022  9/15/2022  9/15/2022
 7 Canada                   7/1/2022   9/1/2022   7/10/2022  9/10/2022
 8 Canadian                 1/2/2023   8/15/2023  1/9/2023   8/22/2023
 9 China                    5/8/2023   5/8/2023   5/14/2023  5/14/2023
10 Chinese                  11/11/2022 9/1/2023   11/21/2022 9/8/2023 
# ℹ 32 more rows</code></pre>
</div>
</div>
</section><section id="other-languages" class="level1"><h1>Other languages</h1>
<section id="generating-sql" class="level2"><h2 class="anchored" data-anchor-id="generating-sql">Generating SQL</h2>
<p>Sử dụng R để generate SQL query</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">library</span>(dbplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dbplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:dplyr':

    ident, sql</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">library</span>(RSQLite)</span>
<span id="cb16-2"><a href="#cb16-2"></a>df_mem <span class="ot">&lt;-</span> <span class="fu">memdb_frame</span>(trip_data, <span class="at">.name =</span> <span class="st">"example_table"</span>)</span>
<span id="cb16-3"><a href="#cb16-3"></a></span>
<span id="cb16-4"><a href="#cb16-4"></a>df_mem <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="fu">group_by</span>(CAT_TRAVELER_NATIONALITY) <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6"></a>  <span class="fu">summarize_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">"N_"</span>)), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7"></a>  <span class="fu">show_query</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;SQL&gt;
SELECT `CAT_TRAVELER_NATIONALITY`, AVG(`N_DURATION_DAY`) AS `N_DURATION_DAY`
FROM `example_table`
GROUP BY `CAT_TRAVELER_NATIONALITY`</code></pre>
</div>
</div>
</section><section id="r---base-data.table" class="level2"><h2 class="anchored" data-anchor-id="r---base-data.table">R - <code>base</code> &amp; <code>data.table</code>
</h2>
<p>sử dụng <code><a href="https://rdrr.io/r/base/grep.html">base::grep</a></code> để tìm tất cả các columns bắt đầu bằng <code>AMT_</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>cols_n <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"^AMT_"</span>, <span class="fu">names</span>(trip_data), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">print</span>(cols_n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "AMT_ACCOMMODATION_COST"  "AMT_TRANSPORTATION_COST"</code></pre>
</div>
</div>
<p>sử dụng vector để lưu các cột chúng ta muốn group by:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>cols_grp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CAT_TRAVELER_NATIONALITY"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>chúng ta có thể dùng vector này trong <code><a href="https://rdrr.io/r/stats/aggregate.html">stats::aggregate</a></code></p>
<p>hoặc trong <code>data.table</code></p>
</section><section id="python-pandas" class="level2"><h2 class="anchored" data-anchor-id="python-pandas">python <code>pandas</code>
</h2>
<p>tương tự trong python, sử dụng list comprehension:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1"></a><span class="in">```{python}</span></span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="in">import pandas as pd</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="in">cols_n   = [vbl for vbl in trip_data.columns if vbl[0:2] == 'AMT_']</span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="in">cols_grp = ["CAT_TRAVELER_NATIONALITY"]</span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="in">trip_data.groupby(cols_grp)[cols_n].sum()</span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section></section><section id="updates-by-emily" class="level1"><h1>Updates by Emily</h1>
<section id="concept-map" class="level2"><h2 class="anchored" data-anchor-id="concept-map">Concept Map</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"></figure><p></p>
<div>
<pre class="mermaid mermaid-js">%%{init: {'theme':'dark'}}%%
flowchart LR
  A(dataframe)-- has --&gt; B(columns)
  A(dataframe)-- has --&gt; C(names)
  B -- have --&gt; D(data types)
  B -- have --&gt; E(units)
  B -- have --&gt; F(meaning)
  C -- should encode --&gt; D
  C -- should encode --&gt; E
  C -- should encode --&gt; F
  C -- can support --&gt; G(validation)
  C -- explained in --&gt; H(documentation)
  G -- should check consistency of --&gt; C
  G -- should check consistency of --&gt; H
  H --&gt; I(data dictionary)
  H --&gt; K(ERD)
</pre>
</div>
<p></p>
</div>
</div>
</div>
</section><section id="new-package-dec-2020" class="level2"><h2 class="anchored" data-anchor-id="new-package-dec-2020">New Package (Dec 2020)</h2>
<p><a href="https://emilyriederer.github.io/convo/articles/quickstart-guide.html"><code>convo</code></a> là một thư viện released bởi Emily phục vụ cho việc quản lý controlled vocabulary:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">library</span>(convo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>vocab.yaml</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource yaml number-lines code-with-copy"><code class="sourceCode yaml"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">level1</span><span class="kw">:</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="at">  </span><span class="fu">ID</span><span class="kw">:</span></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="at">    </span><span class="fu">desc</span><span class="kw">:</span><span class="at"> Unique identifier</span></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="at">    </span><span class="fu">valid</span><span class="kw">:</span></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="at">      </span><span class="kw">-</span><span class="at"> col_vals_not_null()</span></span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="at">      </span><span class="kw">-</span><span class="at"> col_is_numeric()</span></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="at">      </span><span class="kw">-</span><span class="at"> col_vals_between(1000, 99999)</span></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="at">  </span><span class="fu">IND</span><span class="kw">:</span></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="at">    </span><span class="fu">desc</span><span class="kw">:</span><span class="at"> Binary indicator</span></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="at">    </span><span class="fu">valid</span><span class="kw">:</span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="at">      </span><span class="kw">-</span><span class="at"> col_is_numeric()</span></span>
<span id="cb23-12"><a href="#cb23-12"></a><span class="at">      </span><span class="kw">-</span><span class="at"> col_vals_in_set(c(0,1))</span></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="at">    </span><span class="fu">rename</span><span class="kw">:</span></span>
<span id="cb23-14"><a href="#cb23-14"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">when</span><span class="kw">:</span><span class="at"> SUM</span></span>
<span id="cb23-15"><a href="#cb23-15"></a><span class="at">        </span><span class="fu">then</span><span class="kw">:</span><span class="at"> </span><span class="st">'N'</span></span>
<span id="cb23-16"><a href="#cb23-16"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">when</span><span class="kw">:</span><span class="at"> AVG</span></span>
<span id="cb23-17"><a href="#cb23-17"></a><span class="at">        </span><span class="fu">then</span><span class="kw">:</span><span class="at"> P</span></span>
<span id="cb23-18"><a href="#cb23-18"></a><span class="at">  </span><span class="fu">AMT</span><span class="kw">:</span></span>
<span id="cb23-19"><a href="#cb23-19"></a><span class="at">    </span><span class="fu">desc</span><span class="kw">:</span><span class="at"> Non-negative, summable quantity</span></span>
<span id="cb23-20"><a href="#cb23-20"></a><span class="at">    </span><span class="fu">valid</span><span class="kw">:</span></span>
<span id="cb23-21"><a href="#cb23-21"></a><span class="at">      </span><span class="kw">-</span><span class="at"> col_is_numeric()</span></span>
<span id="cb23-22"><a href="#cb23-22"></a><span class="at">      </span><span class="kw">-</span><span class="at"> col_vals_gte(0)</span></span>
<span id="cb23-23"><a href="#cb23-23"></a><span class="at">  </span><span class="fu">VAL</span><span class="kw">:</span></span>
<span id="cb23-24"><a href="#cb23-24"></a><span class="at">    </span><span class="fu">desc</span><span class="kw">:</span><span class="at"> Value</span></span>
<span id="cb23-25"><a href="#cb23-25"></a><span class="at">    </span><span class="fu">valid</span><span class="kw">:</span></span>
<span id="cb23-26"><a href="#cb23-26"></a><span class="at">      </span><span class="kw">-</span><span class="at"> col_is_numeric()</span></span>
<span id="cb23-27"><a href="#cb23-27"></a><span class="at">    </span><span class="fu">rename</span><span class="kw">:</span></span>
<span id="cb23-28"><a href="#cb23-28"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">when</span><span class="kw">:</span><span class="at"> AVG</span></span>
<span id="cb23-29"><a href="#cb23-29"></a><span class="at">        </span><span class="fu">then</span><span class="kw">:</span><span class="at"> VALAV</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section><section id="new-package-april-2021" class="level2"><h2 class="anchored" data-anchor-id="new-package-april-2021">New Package (April 2021)</h2>
<p><a href="https://emilyriederer.github.io/dbtplyr/#!/overview"><code>dbtplyr</code></a> là một package port tính năng “select helpers” của <code>dplyr</code> sang <code>dbt</code>.</p>


<!-- -->

</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/lktuan\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb24" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1"></a><span class="co">---</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="an">title:</span><span class="co"> "Về quy ước đặt tên dữ liệu"</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="an">description:</span><span class="co"> "Danh pháp quy ước để đặt tên cho dữ liệu dạng bảng, tăng tốc độ hiểu biết và sử dụng dữ liệu"</span></span>
<span id="cb24-4"><a href="#cb24-4"></a><span class="an">author:</span></span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="co">  - name: "Tuan Le Khac"</span></span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="co">    url: https://lktuan.github.io/</span></span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="an">date:</span><span class="co"> 06-05-2024</span></span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="an">date-modified:</span><span class="co"> 07-03-2024</span></span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="an">categories:</span><span class="co"> [data quality]</span></span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="an">image:</span><span class="co"> pepe.jpg</span></span>
<span id="cb24-11"><a href="#cb24-11"></a><span class="an">draft:</span><span class="co"> false</span></span>
<span id="cb24-12"><a href="#cb24-12"></a><span class="an">format:</span></span>
<span id="cb24-13"><a href="#cb24-13"></a><span class="co">  html:</span></span>
<span id="cb24-14"><a href="#cb24-14"></a><span class="co">    code-fold: false</span></span>
<span id="cb24-15"><a href="#cb24-15"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb24-16"><a href="#cb24-16"></a><span class="co">    code-line-numbers: true</span></span>
<span id="cb24-17"><a href="#cb24-17"></a><span class="co"># css: html/styles.scss</span></span>
<span id="cb24-18"><a href="#cb24-18"></a><span class="an">fig-cap-location:</span><span class="co"> bottom</span></span>
<span id="cb24-19"><a href="#cb24-19"></a><span class="co"># editor: visual</span></span>
<span id="cb24-20"><a href="#cb24-20"></a><span class="co">---</span></span>
<span id="cb24-21"><a href="#cb24-21"></a></span>
<span id="cb24-22"><a href="#cb24-22"></a>::: {.callout-note name="Edit"}</span>
<span id="cb24-23"><a href="#cb24-23"></a>Các bạn cũng có thể xem thêm slide về dbtplyr của Emily trong posit::conf ở <span class="co">[</span><span class="ot">đây</span><span class="co">](https://www.emilyriederer.com/talk/dbtplyr/)</span>.</span>
<span id="cb24-24"><a href="#cb24-24"></a>:::</span>
<span id="cb24-25"><a href="#cb24-25"></a></span>
<span id="cb24-26"><a href="#cb24-26"></a>------------------------------------------------------------------------</span>
<span id="cb24-27"><a href="#cb24-27"></a></span>
<span id="cb24-28"><a href="#cb24-28"></a>Đây là keynote từ article <span class="co">[</span><span class="ot">Column Names as Contracts</span><span class="co">](https://emilyriederer.netlify.app/post/column-name-contracts/)</span> của <span class="co">[</span><span class="ot">Emily Riederer</span><span class="co">](https://emilyriederer.netlify.app/about)</span>.</span>
<span id="cb24-29"><a href="#cb24-29"></a></span>
<span id="cb24-30"><a href="#cb24-30"></a>Các sản phẩm phần mềm luôn tuân theo một quy ước nhất định (về hình ảnh, ký tự) nhằm để người dùng có thể ngay lập tức nắm bắt được cách thức sử dụng, giao tiếp với nó. Ví dụ, nút Home thường sẽ đưa người dùng về trang chủ của một mobile app, nút "blog" trên blog của tôi sẽ đưa các bạn tiếp cận danh mục bài viết, etc. Ở layer phía sau, các API được BE viết cần tuân thủ documented inputs &amp; outputs, để các BE khác hay FE có thể sử dụng.</span>
<span id="cb24-31"><a href="#cb24-31"></a></span>
<span id="cb24-32"><a href="#cb24-32"></a>Tuy nhiên các bảng dữ liệu lại nằm ở một vùng màu xám không rõ ràng. Data service (từ producer i.e DE -<span class="sc">\&gt;</span> user i.e DA, DS) đủ tĩnh để không được xem là normal service, nhưng cũng đủ thô để người ta ít chú ý đến nó về mặt giao diện. DE cứ thể lấy hết mọi dữ liệu trong hệ thống, DA nhìn dữ liệu và ngay lập tức giả định được nội dung của (cột) dữ liệu đó.</span>
<span id="cb24-33"><a href="#cb24-33"></a></span>
<span id="cb24-34"><a href="#cb24-34"></a><span class="at">&gt; Producers wonder why consumers aren’t satisfied, and consumers wonder why the data is never “right”.</span></span>
<span id="cb24-35"><a href="#cb24-35"></a></span>
<span id="cb24-36"><a href="#cb24-36"></a>Cũng có một cách được nhiều tổ chức sử dụng như là Metadata managament, như:</span>
<span id="cb24-37"><a href="#cb24-37"></a></span>
<span id="cb24-38"><a href="#cb24-38"></a><span class="ss">-   </span>Lyft’s <span class="co">[</span><span class="ot">Amundsen</span><span class="co">](https://eng.lyft.com/amundsen-lyfts-data-discovery-metadata-engine-62d27254fbb9)</span></span>
<span id="cb24-39"><a href="#cb24-39"></a><span class="ss">-   </span>LinkedIn’s <span class="co">[</span><span class="ot">DataHub</span><span class="co">](https://www.linkedin.com/blog/engineering/archive/data-hub)</span></span>
<span id="cb24-40"><a href="#cb24-40"></a><span class="ss">-   </span>Netflix’s <span class="co">[</span><span class="ot">Metacat</span><span class="co">](https://netflixtechblog.com/building-and-scaling-data-lineage-at-netflix-to-improve-data-infrastructure-reliability-and-1a52526a7977)</span></span>
<span id="cb24-41"><a href="#cb24-41"></a></span>
<span id="cb24-42"><a href="#cb24-42"></a>Tuy nhiên giải pháp này là documentation oriented, producer và user đều phải tuân thủ nghiêm ngặt. Nó không *trực diện* khi DE đặt tên cột, hay DA đọc dữ liệu.</span>
<span id="cb24-43"><a href="#cb24-43"></a></span>
<span id="cb24-44"><a href="#cb24-44"></a>Ý tưởng của Emily là chuẩn hóa các quy ước đặt tên dữ liệu bằng <span class="co">[</span><span class="ot">Controlled vocabulary</span><span class="co">](https://en.wikipedia.org/wiki/Controlled_vocabulary)</span>. Minh họa bằng <span class="in">`pointblank`</span>, <span class="in">`collapsibleTree`</span>, và <span class="in">`dplyr`</span>.</span>
<span id="cb24-45"><a href="#cb24-45"></a></span>
<span id="cb24-46"><a href="#cb24-46"></a><span class="fu"># Controlled Vocabulary</span></span>
<span id="cb24-47"><a href="#cb24-47"></a></span>
<span id="cb24-48"><a href="#cb24-48"></a>CV là phương pháp sử dụng một tập hợp các từ, cụm từ, từ viết tắt để ký hiệu thông tin. Quy ước này cần được định nghĩa đề phù hợp cho tính chất bộ dữ liệu, và cũng đủ đơn giản để người tạo dữ liệu, người sử dụng dữ liệu sử dụng.</span>
<span id="cb24-49"><a href="#cb24-49"></a></span>
<span id="cb24-50"><a href="#cb24-50"></a>Ví dụ, 1 ứng dụng booking.</span>
<span id="cb24-51"><a href="#cb24-51"></a></span>
<span id="cb24-52"><a href="#cb24-52"></a><span class="fu">## Level 1: Kiểu dữ liệu, kiểu đo lường</span></span>
<span id="cb24-53"><a href="#cb24-53"></a></span>
<span id="cb24-54"><a href="#cb24-54"></a><span class="ss">-   </span><span class="in">`ID`</span>: chỉ đối tượng, dạng numberic, tối ưu cho việc lưu trữ và thường làm khóa chính các bảng'</span>
<span id="cb24-55"><a href="#cb24-55"></a><span class="ss">-   </span><span class="in">`IND`</span>: giá trị boolean 0/1, tôi thì thường sử dụng các từ như <span class="in">`IS`</span>, <span class="in">`FLAG`</span>;</span>
<span id="cb24-56"><a href="#cb24-56"></a><span class="ss">-   </span><span class="in">`N`</span>: chỉ các dạng thông tin *có thể đếm (count)* được;</span>
<span id="cb24-57"><a href="#cb24-57"></a><span class="ss">-   </span><span class="in">`AMT`</span>: chỉ các dạng thông tin có thể tổng, thường đề cập đến *currency*;</span>
<span id="cb24-58"><a href="#cb24-58"></a><span class="ss">-   </span><span class="in">`VAL`</span>: cũng là số nhưng không thể tổng được (không có ý nghĩa), ví dụ như *kinh độ*, *vĩ độ*;</span>
<span id="cb24-59"><a href="#cb24-59"></a><span class="ss">-   </span><span class="in">`DT`</span>: ngày;</span>
<span id="cb24-60"><a href="#cb24-60"></a><span class="ss">-   </span><span class="in">`TM`</span>: giờ hoặc ngày giờ;</span>
<span id="cb24-61"><a href="#cb24-61"></a><span class="ss">-   </span><span class="in">`CAT`</span>: category</span>
<span id="cb24-62"><a href="#cb24-62"></a></span>
<span id="cb24-63"><a href="#cb24-63"></a>Cũng tùy vào dữ liệu, có thể thêm các cụm từ nhất định đề đề cập đến thông tin dữ liệu đó mang lại, ví dụ <span class="in">`ADD`</span> cho address.</span>
<span id="cb24-64"><a href="#cb24-64"></a></span>
<span id="cb24-65"><a href="#cb24-65"></a><span class="fu">## Level 2: Đối tượng, chủ đề</span></span>
<span id="cb24-66"><a href="#cb24-66"></a></span>
<span id="cb24-67"><a href="#cb24-67"></a>Mối quan tâm của người dùng dữ liệu cũng giống như nhà quản trị, xung quanh các đối tượng của business: <span class="in">`USER`</span>, <span class="in">`TRANSACTION`</span>, etc.</span>
<span id="cb24-68"><a href="#cb24-68"></a></span>
<span id="cb24-69"><a href="#cb24-69"></a>Đối với ứng dụng đặt xe, các chủ thể có thể cần quan tâm là <span class="in">`TRIP`</span>, <span class="in">`TRAVELER`</span>, <span class="in">`ACCOMODATION`</span>, <span class="in">`TRANSPORTATION`</span>, etc.</span>
<span id="cb24-70"><a href="#cb24-70"></a></span>
<span id="cb24-71"><a href="#cb24-71"></a><span class="fu">## Level 3-n: Chi tiết</span></span>
<span id="cb24-72"><a href="#cb24-72"></a></span>
<span id="cb24-73"><a href="#cb24-73"></a>Hai tầng trên về cơ bản đã cho phép chúng ta mô tả được cột thông tin, chúng đều thể hiện được thuộc tính của chủ thể. Ví dụ:</span>
<span id="cb24-74"><a href="#cb24-74"></a></span>
<span id="cb24-75"><a href="#cb24-75"></a><span class="ss">-   </span><span class="in">`AMT_TRIP`</span>: giá trị deal của Trip;</span>
<span id="cb24-76"><a href="#cb24-76"></a><span class="ss">-   </span><span class="in">`ADD_DESTINATION`</span>: Điểm đến của trip.</span>
<span id="cb24-77"><a href="#cb24-77"></a></span>
<span id="cb24-78"><a href="#cb24-78"></a>Tuy nhiên tùy vào từng use case, chúng ta hoàn toàn có thể mở rộng được về cả hai phía. Ví dụ:</span>
<span id="cb24-79"><a href="#cb24-79"></a></span>
<span id="cb24-80"><a href="#cb24-80"></a><span class="ss">-   </span>Về phía trước: khi làm việc với nhiều layer dữ liệu, ta có thể dùng <span class="in">`RAW`</span>, <span class="in">`STAGING`</span>, <span class="in">`DW`</span>, <span class="in">`DL`</span>, <span class="in">`DM`</span>, etc\</span>
<span id="cb24-81"><a href="#cb24-81"></a><span class="ss">-   </span>Về phía sau: <span class="in">`DAY`</span> hoặc <span class="in">`MONTH`</span> cho <span class="in">`N_DURATION`</span>, <span class="in">`VND`</span> hoặc <span class="in">`USD`</span> cho currency <span class="in">`AMT`</span>.</span>
<span id="cb24-82"><a href="#cb24-82"></a></span>
<span id="cb24-83"><a href="#cb24-83"></a>Miễn là có một quy chuẩn, và nó đủ đơn giản để sử dụng.</span>
<span id="cb24-84"><a href="#cb24-84"></a></span>
<span id="cb24-85"><a href="#cb24-85"></a><span class="fu">## Kết hợp chúng lại</span></span>
<span id="cb24-86"><a href="#cb24-86"></a></span>
<span id="cb24-87"><a href="#cb24-87"></a>Tất nhiên ràng buộc việc đặt tên như vậy không chỉ để trang trí, nó sẽ giúp chúng ta tự động hóa quy trình kiểm soát chất lượng dữ liệu, .</span>
<span id="cb24-88"><a href="#cb24-88"></a></span>
<span id="cb24-89"><a href="#cb24-89"></a>Tôi sử dụng <span class="co">[</span><span class="ot">bộ dữ liệu</span><span class="co">](https://www.kaggle.com/datasets/rkiattisak/traveler-trip-data)</span> này để thực hành (cột dữ liệu đã được đổi tên).</span>
<span id="cb24-90"><a href="#cb24-90"></a></span>
<span id="cb24-93"><a href="#cb24-93"></a><span class="in">```{r}</span></span>
<span id="cb24-94"><a href="#cb24-94"></a><span class="co">#| eval: true # Do evaluate this chunk</span></span>
<span id="cb24-95"><a href="#cb24-95"></a><span class="co">#| echo: false # Do show this chunk in the final rendered document</span></span>
<span id="cb24-96"><a href="#cb24-96"></a><span class="co">#| output: false # Do show the output / results of this chunk in the rendered document</span></span>
<span id="cb24-97"><a href="#cb24-97"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-98"><a href="#cb24-98"></a>trip_data <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">'C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">Tuan Le</span><span class="sc">\\</span><span class="st">git</span><span class="sc">\\</span><span class="st">lktuan.github.io</span><span class="sc">\\</span><span class="st">blog</span><span class="sc">\\</span><span class="st">2024-06-05-cnac</span><span class="sc">\\</span><span class="st">Travel details dataset.csv'</span>)</span>
<span id="cb24-99"><a href="#cb24-99"></a><span class="fu">names</span>(trip_data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ID_TRIP"</span>, <span class="st">"CAT_DESTINATION_CITY"</span>, <span class="st">"DT_START"</span>, <span class="st">"DT_END"</span>,<span class="st">"N_DURATION_DAY"</span>,<span class="st">"CAT_TRAVELER_NAME"</span>,<span class="st">"VAL_AGE_TRAVELER"</span>,<span class="st">"IND_GENDER_TRAVELER"</span>,<span class="st">"CAT_TRAVELER_NATIONALITY"</span>, <span class="st">"CAT_ACCOMMODATION_TYPE"</span>, <span class="st">"AMT_ACCOMMODATION_COST"</span>, <span class="st">"CAT_TRANSPORTATION_TYPE"</span>,<span class="st">"AMT_TRANSPORTATION_COST"</span>)</span>
<span id="cb24-100"><a href="#cb24-100"></a><span class="in">```</span></span>
<span id="cb24-101"><a href="#cb24-101"></a></span>
<span id="cb24-104"><a href="#cb24-104"></a><span class="in">```{r}</span></span>
<span id="cb24-105"><a href="#cb24-105"></a><span class="fu">head</span>(trip_data)</span>
<span id="cb24-106"><a href="#cb24-106"></a><span class="in">```</span></span>
<span id="cb24-107"><a href="#cb24-107"></a></span>
<span id="cb24-108"><a href="#cb24-108"></a><span class="fu"># Data Validation</span></span>
<span id="cb24-109"><a href="#cb24-109"></a></span>
<span id="cb24-110"><a href="#cb24-110"></a>Sử dụng <span class="in">`pointblank`</span> của R để kiếm tra một số tính chất của dữ liệu:</span>
<span id="cb24-111"><a href="#cb24-111"></a></span>
<span id="cb24-114"><a href="#cb24-114"></a><span class="in">```{r}</span></span>
<span id="cb24-115"><a href="#cb24-115"></a><span class="fu">library</span>(pointblank)</span>
<span id="cb24-116"><a href="#cb24-116"></a></span>
<span id="cb24-117"><a href="#cb24-117"></a>agent <span class="ot">&lt;-</span></span>
<span id="cb24-118"><a href="#cb24-118"></a>  trip_data  <span class="sc">%&gt;%</span></span>
<span id="cb24-119"><a href="#cb24-119"></a>  <span class="fu">create_agent</span>(<span class="at">actions =</span> <span class="fu">action_levels</span>(<span class="at">stop_at =</span> <span class="fl">0.001</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-120"><a href="#cb24-120"></a>  <span class="fu">col_vals_gte</span>(<span class="fu">starts_with</span>(<span class="st">"N"</span>), <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># check if cols start with N is GTE 0 or not</span></span>
<span id="cb24-121"><a href="#cb24-121"></a>  <span class="fu">col_vals_gte</span>(<span class="fu">starts_with</span>(<span class="st">"VAL"</span>), <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="co"># check if cols start with VAL is GTE 0 or not</span></span>
<span id="cb24-122"><a href="#cb24-122"></a>  <span class="fu">col_vals_not_null</span>(<span class="fu">starts_with</span>(<span class="st">"IND"</span>)) <span class="sc">%&gt;%</span> <span class="co"># check if cols start with IND contain Null or not</span></span>
<span id="cb24-123"><a href="#cb24-123"></a>  <span class="fu">col_vals_in_set</span>(<span class="fu">starts_with</span>(<span class="st">"IND"</span>), <span class="fu">c</span>(<span class="st">"Male"</span>,<span class="st">"Female"</span>)) <span class="sc">%&gt;%</span> <span class="co"># validate the value of only column started with IND - Gender</span></span>
<span id="cb24-124"><a href="#cb24-124"></a>  <span class="fu">col_is_date</span>(<span class="fu">starts_with</span>(<span class="st">"DT"</span>)) <span class="sc">%&gt;%</span> <span class="co"># check validation of date columns</span></span>
<span id="cb24-125"><a href="#cb24-125"></a>  <span class="fu">interrogate</span>()</span>
<span id="cb24-126"><a href="#cb24-126"></a><span class="in">```</span></span>
<span id="cb24-127"><a href="#cb24-127"></a></span>
<span id="cb24-128"><a href="#cb24-128"></a>::: column-margin</span>
<span id="cb24-129"><a href="#cb24-129"></a>Note: To type <span class="in">`pipe`</span> operator in VS Code, use this in the <span class="in">`keybindings.json`</span> file:</span>
<span id="cb24-130"><a href="#cb24-130"></a></span>
<span id="cb24-131"><a href="#cb24-131"></a><span class="in">``` json</span></span>
<span id="cb24-132"><a href="#cb24-132"></a><span class="fu">{</span></span>
<span id="cb24-133"><a href="#cb24-133"></a>  <span class="dt">"key"</span><span class="fu">:</span> <span class="st">"Ctrl+Shift+m"</span><span class="fu">,</span></span>
<span id="cb24-134"><a href="#cb24-134"></a>  <span class="dt">"command"</span><span class="fu">:</span> <span class="st">"type"</span><span class="fu">,</span></span>
<span id="cb24-135"><a href="#cb24-135"></a>  <span class="dt">"args"</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">"text"</span><span class="fu">:</span> <span class="st">" %&gt;% "</span> <span class="fu">},</span></span>
<span id="cb24-136"><a href="#cb24-136"></a>  <span class="dt">"when"</span><span class="fu">:</span> <span class="st">"editorTextFocus</span></span>
<span id="cb24-137"><a href="#cb24-137"></a><span class="st">            &amp;&amp; !editorHasSelection</span></span>
<span id="cb24-138"><a href="#cb24-138"></a><span class="st">            &amp;&amp; editorLangId</span></span>
<span id="cb24-139"><a href="#cb24-139"></a><span class="st">            == 'quarto'"</span></span>
<span id="cb24-140"><a href="#cb24-140"></a><span class="fu">}</span></span>
<span id="cb24-141"><a href="#cb24-141"></a><span class="in">```</span></span>
<span id="cb24-142"><a href="#cb24-142"></a></span>
<span id="cb24-143"><a href="#cb24-143"></a>Then you can get the <span class="in">`pipe`</span> when type <span class="in">`Ctrl + Shift + M`</span>.</span>
<span id="cb24-144"><a href="#cb24-144"></a>:::</span>
<span id="cb24-145"><a href="#cb24-145"></a></span>
<span id="cb24-148"><a href="#cb24-148"></a><span class="in">```{r}</span></span>
<span id="cb24-149"><a href="#cb24-149"></a>agent</span>
<span id="cb24-150"><a href="#cb24-150"></a><span class="in">```</span></span>
<span id="cb24-151"><a href="#cb24-151"></a></span>
<span id="cb24-152"><a href="#cb24-152"></a>Cool! Không chỉ kiểm tra được tính đúng đắn của dữ liệu, cũng có thể xác định được biến nào không tuân theo quy tắc đặt tên.</span>
<span id="cb24-153"><a href="#cb24-153"></a></span>
<span id="cb24-154"><a href="#cb24-154"></a><span class="fu"># Data Discoverability</span></span>
<span id="cb24-155"><a href="#cb24-155"></a></span>
<span id="cb24-158"><a href="#cb24-158"></a><span class="in">```{r}</span></span>
<span id="cb24-159"><a href="#cb24-159"></a>cols_data <span class="ot">&lt;-</span> <span class="fu">names</span>(trip_data)</span>
<span id="cb24-160"><a href="#cb24-160"></a>cols_data_split <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(cols_data,<span class="st">"_"</span>)</span>
<span id="cb24-161"><a href="#cb24-161"></a>cols_components <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-162"><a href="#cb24-162"></a>  <span class="at">variable =</span> cols_data,</span>
<span id="cb24-163"><a href="#cb24-163"></a>  <span class="at">level1 =</span> <span class="fu">vapply</span>(cols_data_split, <span class="at">FUN =</span> <span class="cf">function</span>(x) x[<span class="dv">1</span>], <span class="at">FUN.VALUE =</span> <span class="fu">character</span>(<span class="dv">1</span>)),</span>
<span id="cb24-164"><a href="#cb24-164"></a>  <span class="at">level2 =</span> <span class="fu">vapply</span>(cols_data_split, <span class="at">FUN =</span> <span class="cf">function</span>(x) x[<span class="dv">2</span>], <span class="at">FUN.VALUE =</span> <span class="fu">character</span>(<span class="dv">1</span>))</span>
<span id="cb24-165"><a href="#cb24-165"></a>)</span>
<span id="cb24-166"><a href="#cb24-166"></a><span class="fu">head</span>(cols_components)</span>
<span id="cb24-167"><a href="#cb24-167"></a><span class="in">```</span></span>
<span id="cb24-168"><a href="#cb24-168"></a></span>
<span id="cb24-169"><a href="#cb24-169"></a>Đây là một cách để xây dựng metadata, chúng ta có thể touch một cách interactive với:</span>
<span id="cb24-170"><a href="#cb24-170"></a></span>
<span id="cb24-173"><a href="#cb24-173"></a><span class="in">```{r}</span></span>
<span id="cb24-174"><a href="#cb24-174"></a><span class="fu">library</span>(DT)</span>
<span id="cb24-175"><a href="#cb24-175"></a><span class="fu">datatable</span>(cols_components,  <span class="at">filter =</span> <span class="fu">list</span>(<span class="at">position =</span> <span class="st">'top'</span>, <span class="at">clear =</span> <span class="cn">FALSE</span>))</span>
<span id="cb24-176"><a href="#cb24-176"></a><span class="in">```</span></span>
<span id="cb24-177"><a href="#cb24-177"></a></span>
<span id="cb24-178"><a href="#cb24-178"></a>Cũng có thể visualize thành một tree như bên dưới:</span>
<span id="cb24-179"><a href="#cb24-179"></a></span>
<span id="cb24-182"><a href="#cb24-182"></a><span class="in">```{r}</span></span>
<span id="cb24-183"><a href="#cb24-183"></a><span class="fu">library</span>(collapsibleTree)</span>
<span id="cb24-184"><a href="#cb24-184"></a><span class="fu">collapsibleTree</span>(cols_components,</span>
<span id="cb24-185"><a href="#cb24-185"></a>                <span class="at">hierarchy =</span> <span class="fu">paste0</span>(<span class="st">"level"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb24-186"><a href="#cb24-186"></a>                <span class="at">nodeSize =</span> <span class="st">"leafCount"</span></span>
<span id="cb24-187"><a href="#cb24-187"></a>                )</span>
<span id="cb24-188"><a href="#cb24-188"></a><span class="in">```</span></span>
<span id="cb24-189"><a href="#cb24-189"></a></span>
<span id="cb24-190"><a href="#cb24-190"></a>Đây là cách xem từ kiểu dữ liệu -<span class="sc">\&gt;</span> chủ thể, chúng ta cũng có thể làm ngược lại:</span>
<span id="cb24-191"><a href="#cb24-191"></a></span>
<span id="cb24-194"><a href="#cb24-194"></a><span class="in">```{r}</span></span>
<span id="cb24-195"><a href="#cb24-195"></a><span class="fu">collapsibleTree</span>(cols_components,</span>
<span id="cb24-196"><a href="#cb24-196"></a>                <span class="at">hierarchy =</span> <span class="fu">paste0</span>(<span class="st">"level"</span>, <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)),</span>
<span id="cb24-197"><a href="#cb24-197"></a>                <span class="at">nodeSize =</span> <span class="st">"leafCount"</span></span>
<span id="cb24-198"><a href="#cb24-198"></a>                )</span>
<span id="cb24-199"><a href="#cb24-199"></a><span class="in">```</span></span>
<span id="cb24-200"><a href="#cb24-200"></a></span>
<span id="cb24-201"><a href="#cb24-201"></a>Bộ dữ liệu mình sử dụng khá nghèo nàn và tập trung về một chủ thể duy nhất là <span class="in">`TRIP`</span>, nên khả năng minh họa không được phong phú 😂. Ngoài ra, việc đặt tên như thế cũng giúp ta dễ dàng gọi biến ở IDE.</span>
<span id="cb24-202"><a href="#cb24-202"></a></span>
<span id="cb24-203"><a href="#cb24-203"></a><span class="fu"># Data Wrangling</span></span>
<span id="cb24-204"><a href="#cb24-204"></a></span>
<span id="cb24-205"><a href="#cb24-205"></a>Tương tự, với việc sử dụng một bộ từ điển có hệ thống, lớp lang cũng support chúng ta trong việc biến đổi dữ liệu. Ví dụ chúng ta có thể tận dụng "select helpers" trong gói <span class="in">`dplyr`</span>:</span>
<span id="cb24-206"><a href="#cb24-206"></a></span>
<span id="cb24-209"><a href="#cb24-209"></a><span class="in">```{r}</span></span>
<span id="cb24-210"><a href="#cb24-210"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb24-211"><a href="#cb24-211"></a>trip_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(trip_data)</span>
<span id="cb24-212"><a href="#cb24-212"></a>trip_data <span class="sc">%&gt;%</span></span>
<span id="cb24-213"><a href="#cb24-213"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="sc">!</span><span class="fu">is.na</span>(.))) <span class="sc">%&gt;%</span></span>
<span id="cb24-214"><a href="#cb24-214"></a>  <span class="fu">group_by</span>(CAT_TRAVELER_NATIONALITY) <span class="sc">%&gt;%</span></span>
<span id="cb24-215"><a href="#cb24-215"></a>  <span class="fu">summarize</span>(</span>
<span id="cb24-216"><a href="#cb24-216"></a>    <span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"DT_"</span>), <span class="fu">c</span>(min,max))</span>
<span id="cb24-217"><a href="#cb24-217"></a>  )</span>
<span id="cb24-218"><a href="#cb24-218"></a><span class="in">```</span></span>
<span id="cb24-219"><a href="#cb24-219"></a></span>
<span id="cb24-220"><a href="#cb24-220"></a><span class="fu"># Other languages</span></span>
<span id="cb24-221"><a href="#cb24-221"></a></span>
<span id="cb24-222"><a href="#cb24-222"></a><span class="fu">## Generating SQL</span></span>
<span id="cb24-223"><a href="#cb24-223"></a></span>
<span id="cb24-224"><a href="#cb24-224"></a>Sử dụng R để generate SQL query</span>
<span id="cb24-225"><a href="#cb24-225"></a></span>
<span id="cb24-228"><a href="#cb24-228"></a><span class="in">```{r}</span></span>
<span id="cb24-229"><a href="#cb24-229"></a><span class="fu">library</span>(dbplyr)</span>
<span id="cb24-230"><a href="#cb24-230"></a><span class="fu">library</span>(RSQLite)</span>
<span id="cb24-231"><a href="#cb24-231"></a>df_mem <span class="ot">&lt;-</span> <span class="fu">memdb_frame</span>(trip_data, <span class="at">.name =</span> <span class="st">"example_table"</span>)</span>
<span id="cb24-232"><a href="#cb24-232"></a></span>
<span id="cb24-233"><a href="#cb24-233"></a>df_mem <span class="sc">%&gt;%</span></span>
<span id="cb24-234"><a href="#cb24-234"></a>  <span class="fu">group_by</span>(CAT_TRAVELER_NATIONALITY) <span class="sc">%&gt;%</span></span>
<span id="cb24-235"><a href="#cb24-235"></a>  <span class="fu">summarize_at</span>(<span class="fu">vars</span>(<span class="fu">starts_with</span>(<span class="st">"N_"</span>)), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-236"><a href="#cb24-236"></a>  <span class="fu">show_query</span>()</span>
<span id="cb24-237"><a href="#cb24-237"></a><span class="in">```</span></span>
<span id="cb24-238"><a href="#cb24-238"></a></span>
<span id="cb24-239"><a href="#cb24-239"></a><span class="fu">## R - `base` &amp; `data.table`</span></span>
<span id="cb24-240"><a href="#cb24-240"></a></span>
<span id="cb24-241"><a href="#cb24-241"></a>sử dụng <span class="in">`base::grep`</span> để tìm tất cả các columns bắt đầu bằng <span class="in">`AMT_`</span></span>
<span id="cb24-242"><a href="#cb24-242"></a></span>
<span id="cb24-245"><a href="#cb24-245"></a><span class="in">```{r}</span></span>
<span id="cb24-246"><a href="#cb24-246"></a>cols_n <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"^AMT_"</span>, <span class="fu">names</span>(trip_data), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-247"><a href="#cb24-247"></a><span class="fu">print</span>(cols_n)</span>
<span id="cb24-248"><a href="#cb24-248"></a><span class="in">```</span></span>
<span id="cb24-249"><a href="#cb24-249"></a></span>
<span id="cb24-250"><a href="#cb24-250"></a>sử dụng vector để lưu các cột chúng ta muốn group by:</span>
<span id="cb24-251"><a href="#cb24-251"></a></span>
<span id="cb24-254"><a href="#cb24-254"></a><span class="in">```{r}</span></span>
<span id="cb24-255"><a href="#cb24-255"></a>cols_grp <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"CAT_TRAVELER_NATIONALITY"</span>)</span>
<span id="cb24-256"><a href="#cb24-256"></a><span class="in">```</span></span>
<span id="cb24-257"><a href="#cb24-257"></a></span>
<span id="cb24-258"><a href="#cb24-258"></a>chúng ta có thể dùng vector này trong <span class="in">`stats::aggregate`</span></span>
<span id="cb24-259"><a href="#cb24-259"></a></span>
<span id="cb24-262"><a href="#cb24-262"></a><span class="in">```{r}</span></span>
<span id="cb24-263"><a href="#cb24-263"></a><span class="co">#| eval: false</span></span>
<span id="cb24-264"><a href="#cb24-264"></a><span class="co">#| echo: false</span></span>
<span id="cb24-265"><a href="#cb24-265"></a><span class="fu">aggregate</span>(trip_data[cols_n], <span class="at">by =</span> trip_data[cols_grp], <span class="at">FUN =</span> sum)</span>
<span id="cb24-266"><a href="#cb24-266"></a><span class="in">```</span></span>
<span id="cb24-267"><a href="#cb24-267"></a></span>
<span id="cb24-268"><a href="#cb24-268"></a>hoặc trong <span class="in">`data.table`</span></span>
<span id="cb24-269"><a href="#cb24-269"></a></span>
<span id="cb24-272"><a href="#cb24-272"></a><span class="in">```{r}</span></span>
<span id="cb24-273"><a href="#cb24-273"></a><span class="co">#| eval: false</span></span>
<span id="cb24-274"><a href="#cb24-274"></a><span class="co">#| echo: false</span></span>
<span id="cb24-275"><a href="#cb24-275"></a><span class="fu">library</span>(data.table)</span>
<span id="cb24-276"><a href="#cb24-276"></a>dt <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(trip_data)</span>
<span id="cb24-277"><a href="#cb24-277"></a>dt[, <span class="fu">lapply</span>(.SD, sum), by <span class="ot">=</span> cols_grp, .SDcols <span class="ot">=</span> cols_n]</span>
<span id="cb24-278"><a href="#cb24-278"></a><span class="in">```</span></span>
<span id="cb24-279"><a href="#cb24-279"></a></span>
<span id="cb24-280"><a href="#cb24-280"></a><span class="fu">## python `pandas`</span></span>
<span id="cb24-281"><a href="#cb24-281"></a></span>
<span id="cb24-282"><a href="#cb24-282"></a>tương tự trong python, sử dụng list comprehension: 31b8e172-b470-440e-83d8-e6b185028602:dAB5AHAAZQA6AE8AUQBCAGoAQQBHAEkAQQBOAHcAQQA1AEEARwBVAEEATgBnAEIAagBBAEMAMABBAE8AQQBBADQAQQBEAGcAQQBaAEEAQQB0AEEARABRAEEAWQBRAEEAdwBBAEcAVQBBAEwAUQBBADUAQQBHAE0AQQBPAFEAQgBpAEEAQwAwAEEAWgBnAEIAbQBBAEQAWQBBAE4AdwBCAGoAQQBHAFEAQQBOAEEAQQB3AEEARABRAEEAWgBRAEEAMgBBAEQAQQBBAAoAcABvAHMAaQB0AGkAbwBuADoATwBRAEEAeABBAEQAYwBBAE4AZwBBAD0ACgBwAHIAZQBmAGkAeAA6AAoAcwBvAHUAcgBjAGUAOgBZAEEAQgBnAEEARwBBAEEAZQB3AEIANwBBAEgAQQBBAGUAUQBCADAAQQBHAGcAQQBiAHcAQgB1AEEASAAwAEEAZgBRAEEASwBBAEEAbwBBAGEAUQBCAHQAQQBIAEEAQQBiAHcAQgB5AEEASABRAEEASQBBAEIAdwBBAEcARQBBAGIAZwBCAGsAQQBHAEUAQQBjAHcAQQBnAEEARwBFAEEAYwB3AEEAZwBBAEgAQQBBAFoAQQBBAEsAQQBHAE0AQQBiAHcAQgBzAEEASABNAEEAWAB3AEIAdQBBAEMAQQBBAEkAQQBBAGcAQQBEADAAQQBJAEEAQgBiAEEASABZAEEAWQBnAEIAcwBBAEMAQQBBAFoAZwBCAHYAQQBIAEkAQQBJAEEAQgAyAEEARwBJAEEAYgBBAEEAZwBBAEcAawBBAGIAZwBBAGcAQQBIAFEAQQBjAGcAQgBwAEEASABBAEEAWAB3AEIAawBBAEcARQBBAGQAQQBCAGgAQQBDADQAQQBZAHcAQgB2AEEARwB3AEEAZABRAEIAdABBAEcANABBAGMAdwBBAGcAQQBHAGsAQQBaAGcAQQBnAEEASABZAEEAWQBnAEIAcwBBAEYAcwBBAE0AQQBBADYAQQBEAEkAQQBYAFEAQQBnAEEARAAwAEEAUABRAEEAZwBBAEMAYwBBAFEAUQBCAE4AQQBGAFEAQQBYAHcAQQBuAEEARgAwAEEAQwBnAEIAagBBAEcAOABBAGIAQQBCAHoAQQBGADgAQQBaAHcAQgB5AEEASABBAEEASQBBAEEAOQBBAEMAQQBBAFcAdwBBAGkAQQBFAE0AQQBRAFEAQgBVAEEARgA4AEEAVgBBAEIAUwBBAEUARQBBAFYAZwBCAEYAQQBFAHcAQQBSAFEAQgBTAEEARgA4AEEAVABnAEIAQgBBAEYAUQBBAFMAUQBCAFAAQQBFADQAQQBRAFEAQgBNAEEARQBrAEEAVgBBAEIAWgBBAEMASQBBAFgAUQBBAEsAQQBIAFEAQQBjAGcAQgBwAEEASABBAEEAWAB3AEIAawBBAEcARQBBAGQAQQBCAGgAQQBDADQAQQBaAHcAQgB5AEEARwA4AEEAZABRAEIAdwBBAEcASQBBAGUAUQBBAG8AQQBHAE0AQQBiAHcAQgBzAEEASABNAEEAWAB3AEIAbgBBAEgASQBBAGMAQQBBAHAAQQBGAHMAQQBZAHcAQgB2AEEARwB3AEEAYwB3AEIAZgBBAEcANABBAFgAUQBBAHUAQQBIAE0AQQBkAFEAQgB0AEEAQwBnAEEASwBRAEEASwBBAEcAQQBBAFkAQQBCAGcAQQBBAD0APQAKAHMAdQBmAGYAaQB4ADoA:31b8e172-b470-440e-83d8-e6b185028602 <span class="sc">\#</span> Updates by Emily</span>
<span id="cb24-283"><a href="#cb24-283"></a></span>
<span id="cb24-284"><a href="#cb24-284"></a><span class="fu">## Concept Map</span></span>
<span id="cb24-285"><a href="#cb24-285"></a></span>
<span id="cb24-288"><a href="#cb24-288"></a><span class="in">```{mermaid}</span></span>
<span id="cb24-289"><a href="#cb24-289"></a><span class="in">%%{init: {'theme':'dark'}}%%</span></span>
<span id="cb24-290"><a href="#cb24-290"></a><span class="in">flowchart LR</span></span>
<span id="cb24-291"><a href="#cb24-291"></a><span class="in">  A(dataframe)-- has --&gt; B(columns)</span></span>
<span id="cb24-292"><a href="#cb24-292"></a><span class="in">  A(dataframe)-- has --&gt; C(names)</span></span>
<span id="cb24-293"><a href="#cb24-293"></a><span class="in">  B -- have --&gt; D(data types)</span></span>
<span id="cb24-294"><a href="#cb24-294"></a><span class="in">  B -- have --&gt; E(units)</span></span>
<span id="cb24-295"><a href="#cb24-295"></a><span class="in">  B -- have --&gt; F(meaning)</span></span>
<span id="cb24-296"><a href="#cb24-296"></a><span class="in">  C -- should encode --&gt; D</span></span>
<span id="cb24-297"><a href="#cb24-297"></a><span class="in">  C -- should encode --&gt; E</span></span>
<span id="cb24-298"><a href="#cb24-298"></a><span class="in">  C -- should encode --&gt; F</span></span>
<span id="cb24-299"><a href="#cb24-299"></a><span class="in">  C -- can support --&gt; G(validation)</span></span>
<span id="cb24-300"><a href="#cb24-300"></a><span class="in">  C -- explained in --&gt; H(documentation)</span></span>
<span id="cb24-301"><a href="#cb24-301"></a><span class="in">  G -- should check consistency of --&gt; C</span></span>
<span id="cb24-302"><a href="#cb24-302"></a><span class="in">  G -- should check consistency of --&gt; H</span></span>
<span id="cb24-303"><a href="#cb24-303"></a><span class="in">  H --&gt; I(data dictionary)</span></span>
<span id="cb24-304"><a href="#cb24-304"></a><span class="in">  H --&gt; K(ERD)</span></span>
<span id="cb24-305"><a href="#cb24-305"></a><span class="in">```</span></span>
<span id="cb24-306"><a href="#cb24-306"></a></span>
<span id="cb24-307"><a href="#cb24-307"></a><span class="fu">## New Package (Dec 2020)</span></span>
<span id="cb24-308"><a href="#cb24-308"></a></span>
<span id="cb24-309"><a href="#cb24-309"></a><span class="co">[</span><span class="ot">`convo`</span><span class="co">](https://emilyriederer.github.io/convo/articles/quickstart-guide.html)</span> là một thư viện released bởi Emily phục vụ cho việc quản lý controlled vocabulary:</span>
<span id="cb24-310"><a href="#cb24-310"></a></span>
<span id="cb24-313"><a href="#cb24-313"></a><span class="in">```{r}</span></span>
<span id="cb24-314"><a href="#cb24-314"></a><span class="co">#| eval: false</span></span>
<span id="cb24-315"><a href="#cb24-315"></a><span class="co">#| echo: true</span></span>
<span id="cb24-316"><a href="#cb24-316"></a><span class="fu">library</span>(convo)</span>
<span id="cb24-317"><a href="#cb24-317"></a><span class="in">```</span></span>
<span id="cb24-318"><a href="#cb24-318"></a></span>
<span id="cb24-319"><a href="#cb24-319"></a><span class="in">```{yaml filename = 'vocab.yaml'}</span></span>
<span id="cb24-320"><a href="#cb24-320"></a><span class="in">level1:</span></span>
<span id="cb24-321"><a href="#cb24-321"></a><span class="in">  ID:</span></span>
<span id="cb24-322"><a href="#cb24-322"></a><span class="in">    desc: Unique identifier</span></span>
<span id="cb24-323"><a href="#cb24-323"></a><span class="in">    valid:</span></span>
<span id="cb24-324"><a href="#cb24-324"></a><span class="in">      - col_vals_not_null()</span></span>
<span id="cb24-325"><a href="#cb24-325"></a><span class="in">      - col_is_numeric()</span></span>
<span id="cb24-326"><a href="#cb24-326"></a><span class="in">      - col_vals_between(1000, 99999)</span></span>
<span id="cb24-327"><a href="#cb24-327"></a><span class="in">  IND:</span></span>
<span id="cb24-328"><a href="#cb24-328"></a><span class="in">    desc: Binary indicator</span></span>
<span id="cb24-329"><a href="#cb24-329"></a><span class="in">    valid:</span></span>
<span id="cb24-330"><a href="#cb24-330"></a><span class="in">      - col_is_numeric()</span></span>
<span id="cb24-331"><a href="#cb24-331"></a><span class="in">      - col_vals_in_set(c(0,1))</span></span>
<span id="cb24-332"><a href="#cb24-332"></a><span class="in">    rename:</span></span>
<span id="cb24-333"><a href="#cb24-333"></a><span class="in">      - when: SUM</span></span>
<span id="cb24-334"><a href="#cb24-334"></a><span class="in">        then: 'N'</span></span>
<span id="cb24-335"><a href="#cb24-335"></a><span class="in">      - when: AVG</span></span>
<span id="cb24-336"><a href="#cb24-336"></a><span class="in">        then: P</span></span>
<span id="cb24-337"><a href="#cb24-337"></a><span class="in">  AMT:</span></span>
<span id="cb24-338"><a href="#cb24-338"></a><span class="in">    desc: Non-negative, summable quantity</span></span>
<span id="cb24-339"><a href="#cb24-339"></a><span class="in">    valid:</span></span>
<span id="cb24-340"><a href="#cb24-340"></a><span class="in">      - col_is_numeric()</span></span>
<span id="cb24-341"><a href="#cb24-341"></a><span class="in">      - col_vals_gte(0)</span></span>
<span id="cb24-342"><a href="#cb24-342"></a><span class="in">  VAL:</span></span>
<span id="cb24-343"><a href="#cb24-343"></a><span class="in">    desc: Value</span></span>
<span id="cb24-344"><a href="#cb24-344"></a><span class="in">    valid:</span></span>
<span id="cb24-345"><a href="#cb24-345"></a><span class="in">      - col_is_numeric()</span></span>
<span id="cb24-346"><a href="#cb24-346"></a><span class="in">    rename:</span></span>
<span id="cb24-347"><a href="#cb24-347"></a><span class="in">      - when: AVG</span></span>
<span id="cb24-348"><a href="#cb24-348"></a><span class="in">        then: VALAV</span></span>
<span id="cb24-349"><a href="#cb24-349"></a><span class="in">```</span></span>
<span id="cb24-350"><a href="#cb24-350"></a></span>
<span id="cb24-351"><a href="#cb24-351"></a><span class="fu">## New Package (April 2021)</span></span>
<span id="cb24-352"><a href="#cb24-352"></a></span>
<span id="cb24-353"><a href="#cb24-353"></a><span class="co">[</span><span class="ot">`dbtplyr`</span><span class="co">](https://emilyriederer.github.io/dbtplyr/#!/overview)</span> là một package port tính năng "select helpers" của <span class="in">`dplyr`</span> sang <span class="in">`dbt`</span>.</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p><span class="faux-block"><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i></a> 2023-2025 Le Khac Tuan</span></p>
</div>   
    <div class="nav-footer-center">
<p><span class="faux-block"> Designed with <i class="fa-solid fa-heart" aria-label="heart"></i>, <span id="commit-info">Loading last commit…</span> </span></p>
</div>
    <div class="nav-footer-right">
<p><span class="faux-block">Made with <a href="https://quarto.org/">Quarto</a></span></p>
</div>
  </div>
</footer><script type="application/javascript" src="commit_info.js"></script>


</body></html>